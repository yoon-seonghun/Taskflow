import{d as J,r as x,c as k,o as K,A as Q,f as s,i as b,g as n,k as W,p as X,t as m,q as $,T as Z,m as _,l as S,L as M,F as B,s as Y,n as l}from"./index-D8qsMxsh.js";const ee={key:0,class:"block text-[13px] font-medium text-gray-700 mb-1"},te={key:0,class:"text-red-500 ml-0.5"},ae=["disabled"],ne={class:"flex items-center gap-2 truncate"},re={key:0},oe={key:1,class:"text-gray-400"},se={key:0,class:"flex items-center gap-2"},le={class:"flex items-center justify-between mb-2"},ie={class:"text-[13px] font-medium"},ue={class:"grid grid-cols-7 gap-0.5 mb-1"},de={class:"grid grid-cols-7 gap-0.5"},ce=["disabled","onClick"],ge={key:0,class:"mt-3 pt-3 border-t border-gray-200"},pe={class:"flex items-center justify-center gap-2"},me={key:1,class:"mt-1 text-xs text-red-500"},ve=J({__name:"DatePicker",props:{modelValue:{default:null},mode:{default:"date"},size:{default:"md"},placeholder:{default:"날짜 선택"},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{},label:{},required:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},minDate:{},maxDate:{}},emits:["update:modelValue","change"],setup(o,{emit:z}){const r=o,c=z,y=x(!1),C=x(null),g=x(new Date().getFullYear()),i=x(new Date().getMonth()),f=x("00"),v=x("00"),p=k(()=>r.modelValue?new Date(r.modelValue):null),j=k(()=>{if(!r.modelValue)return"";const t=new Date(r.modelValue);if(r.mode==="time")return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`;const e=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;return r.mode==="datetime"?`${e} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`:e}),H=k(()=>{const t=new Date(g.value,i.value,1),e=new Date(g.value,i.value+1,0),a=[],h=t.getDay();for(let u=h-1;u>=0;u--){const d=new Date(g.value,i.value,-u);a.push({date:d,isCurrentMonth:!1,isToday:!1,isSelected:!1,isDisabled:V(d)})}const I=new Date;for(let u=1;u<=e.getDate();u++){const d=new Date(g.value,i.value,u);a.push({date:d,isCurrentMonth:!0,isToday:T(d,I),isSelected:p.value?T(d,p.value):!1,isDisabled:V(d)})}const G=42-a.length;for(let u=1;u<=G;u++){const d=new Date(g.value,i.value+1,u);a.push({date:d,isCurrentMonth:!1,isToday:!1,isSelected:!1,isDisabled:V(d)})}return a}),N=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],O=["일","월","화","수","목","금","토"],L=k(()=>{const t=["w-full rounded border transition-all duration-150","flex items-center justify-between gap-2","focus:outline-none focus:ring-2 focus:border-transparent","text-left"],e={sm:"px-2 py-1 text-xs h-7",md:"px-3 py-1.5 text-[13px] h-8",lg:"px-3 py-2 text-sm h-9"},a=r.error?"border-red-500 focus:ring-red-500":y.value?"border-primary-500 ring-2 ring-primary-500":"border-gray-300 focus:ring-primary-500",h=r.disabled?"bg-gray-100 cursor-not-allowed text-gray-500":"bg-white cursor-pointer hover:border-gray-400";return[...t,e[r.size],a,h].join(" ")});function T(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function V(t){return!!(r.minDate&&t<new Date(r.minDate)||r.maxDate&&t>new Date(r.maxDate))}function U(){r.disabled||(y.value=!y.value,y.value&&p.value&&(g.value=p.value.getFullYear(),i.value=p.value.getMonth(),f.value=String(p.value.getHours()).padStart(2,"0"),v.value=String(p.value.getMinutes()).padStart(2,"0")))}function D(){y.value=!1}function q(){i.value===0?(i.value=11,g.value--):i.value--}function E(){i.value===11?(i.value=0,g.value++):i.value++}function P(t){if(t.isDisabled)return;const e=new Date(t.date);r.mode==="datetime"&&e.setHours(parseInt(f.value),parseInt(v.value));const a=r.mode==="datetime"?e.toISOString():`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;c("update:modelValue",a),c("change",a),r.mode==="date"&&D()}function w(){if(!p.value)return;const t=new Date(p.value);t.setHours(parseInt(f.value),parseInt(v.value)),c("update:modelValue",t.toISOString()),c("change",t.toISOString())}function R(){const t=new Date;if(r.mode==="datetime")c("update:modelValue",t.toISOString());else{const e=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;c("update:modelValue",e)}c("change",r.modelValue),D()}function A(t){t.stopPropagation(),c("update:modelValue",null),c("change",null)}function F(t){C.value&&!C.value.contains(t.target)&&D()}return K(()=>{document.addEventListener("click",F)}),Q(()=>{document.removeEventListener("click",F)}),(t,e)=>(l(),s("div",{ref_key:"containerRef",ref:C,class:"relative w-full"},[o.label?(l(),s("label",ee,[X(m(o.label)+" ",1),o.required?(l(),s("span",te,"*")):b("",!0)])):b("",!0),n("button",{type:"button",class:$(L.value),disabled:o.disabled,onClick:U},[n("div",ne,[e[4]||(e[4]=n("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),j.value?(l(),s("span",re,m(j.value),1)):(l(),s("span",oe,m(o.placeholder),1))]),o.clearable&&o.modelValue&&!o.disabled?(l(),s("span",{key:0,class:"text-gray-400 hover:text-gray-600 p-0.5",onClick:A},[...e[5]||(e[5]=[n("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):b("",!0)],10,ae),W(Z,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:_(()=>[y.value?(l(),s("div",{key:0,class:$(["absolute z-50 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-3",o.mode==="time"?"w-40":"w-72"])},[o.mode==="time"?(l(),s("div",se,[S(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),type:"text",maxlength:"2",class:"w-12 px-2 py-1 text-center text-[13px] border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",onChange:w},null,544),[[M,f.value]]),e[6]||(e[6]=n("span",{class:"text-gray-500"},":",-1)),S(n("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),type:"text",maxlength:"2",class:"w-12 px-2 py-1 text-center text-[13px] border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",onChange:w},null,544),[[M,v.value]])])):(l(),s(B,{key:1},[n("div",le,[n("button",{type:"button",class:"p-1 hover:bg-gray-100 rounded",onClick:q},[...e[7]||(e[7]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),n("span",ie,m(g.value)+"년 "+m(N[i.value]),1),n("button",{type:"button",class:"p-1 hover:bg-gray-100 rounded",onClick:E},[...e[8]||(e[8]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])]),n("div",ue,[(l(),s(B,null,Y(O,a=>n("div",{key:a,class:"text-center text-[11px] text-gray-500 py-1"},m(a),1)),64))]),n("div",de,[(l(!0),s(B,null,Y(H.value,(a,h)=>(l(),s("button",{key:h,type:"button",class:$(["w-8 h-8 text-[12px] rounded flex items-center justify-center transition-colors",[a.isCurrentMonth?"":"text-gray-300",a.isToday?"font-bold":"",a.isSelected?"bg-primary-600 text-white":"hover:bg-gray-100",a.isDisabled?"cursor-not-allowed opacity-50":"cursor-pointer"]]),disabled:a.isDisabled,onClick:I=>P(a)},m(a.date.getDate()),11,ce))),128))]),o.mode==="datetime"?(l(),s("div",ge,[n("div",pe,[e[9]||(e[9]=n("span",{class:"text-[13px] text-gray-600"},"시간:",-1)),S(n("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),type:"text",maxlength:"2",class:"w-10 px-1 py-0.5 text-center text-[13px] border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",onChange:w},null,544),[[M,f.value]]),e[10]||(e[10]=n("span",{class:"text-gray-500"},":",-1)),S(n("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>v.value=a),type:"text",maxlength:"2",class:"w-10 px-1 py-0.5 text-center text-[13px] border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",onChange:w},null,544),[[M,v.value]])])])):b("",!0),n("div",{class:"mt-3 pt-3 border-t border-gray-200 flex justify-between"},[n("button",{type:"button",class:"text-[12px] text-primary-600 hover:text-primary-700",onClick:R}," 오늘 "),n("button",{type:"button",class:"text-[12px] text-gray-500 hover:text-gray-700",onClick:D}," 닫기 ")])],64))],2)):b("",!0)]),_:1}),o.error&&o.errorMessage?(l(),s("p",me,m(o.errorMessage),1)):b("",!0)],512))}});export{ve as _};
