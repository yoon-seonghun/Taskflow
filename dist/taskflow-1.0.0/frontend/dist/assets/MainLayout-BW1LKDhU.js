const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ItemDetailPanel--bcWtBE6.js","assets/ItemDetailPanel.vue_vue_type_script_setup_true_lang-xIA6506w.js","assets/index-D8qsMxsh.js","assets/index-BzhNUUBy.css","assets/property-BhXlHRz_.js","assets/item-CAonLf5Y.js","assets/board-BqBw7K7S.js","assets/useToast-BaLNVjwd.js","assets/useConfirm-tRg9u8MQ.js","assets/Button.vue_vue_type_script_setup_true_lang-CsKUyp59.js","assets/MarkdownEditor.vue_vue_type_style_index_0_scoped_f90f4426_lang-Bc65I5vA.js","assets/MarkdownEditor-C_pxBk_Z.css","assets/Spinner.vue_vue_type_script_setup_true_lang-i4Z96JvV.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Input.vue_vue_type_script_setup_true_lang-DbFXPxNG.js","assets/Select.vue_vue_type_script_setup_true_lang-CpAO5_7Q.js","assets/DatePicker.vue_vue_type_script_setup_true_lang-D-7PTvoP.js","assets/ItemDetailPanel-B_AMhflB.css"])))=>i.map(i=>d[i]);
import{d as I,f as c,F as H,k as w,g as e,T as V,m as S,q as A,s as ne,i as y,x as $,t as k,j as z,e as ce,y as de,n as i,u as se,a as ue,z as ae,o as U,A as K,B as F,w as P,C as Y,p as j,D as X,c as x,E as me,G as ve,r as C,H as N,I as q,J as fe,K as pe,_ as W,R as he}from"./index-D8qsMxsh.js";import{_ as Q}from"./Button.vue_vue_type_script_setup_true_lang-CsKUyp59.js";import{u as ie,a as ye}from"./property-BhXlHRz_.js";import{u as ge}from"./useToast-BaLNVjwd.js";import"./MarkdownEditor.vue_vue_type_style_index_0_scoped_f90f4426_lang-Bc65I5vA.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./item-CAonLf5Y.js";const we={class:"p-2"},ke={key:0,class:"my-2 border-t border-gray-100"},xe={class:"w-5 h-5 flex items-center justify-center"},_e={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ce={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Se={key:2,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ee={key:3,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ie={key:4,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={key:5,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},De={key:6,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Me={key:7,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Te={key:8,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$e={key:9,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Be={key:10,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze=I({__name:"Sidebar",props:{open:{type:Boolean},isMobile:{type:Boolean}},emits:["close"],setup(t,{emit:a}){const d=a,u=ce();function v(){d("close")}const l=[{name:"Tasks",label:"업무 페이지",icon:"clipboard"},{name:"Overdue",label:"지연 업무",icon:"alert",warning:!0},{name:"Pending",label:"보류 업무",icon:"pause"},{name:"Completed",label:"완료 작업",icon:"check"},{name:"Deleted",label:"삭제된 작업",icon:"trash"},{divider:!0},{name:"Templates",label:"작업 등록",icon:"document"},{name:"History",label:"이력관리",icon:"history"},{divider:!0},{name:"Users",label:"사용자 등록",icon:"user"},{name:"Shares",label:"공유 사용자",icon:"users"},{divider:!0},{name:"Departments",label:"부서 관리",icon:"building"},{name:"Groups",label:"그룹 관리",icon:"folder"}];return(p,o)=>{const f=de("RouterLink");return i(),c(H,null,[w(V,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:S(()=>[t.open&&t.isMobile?(i(),c("div",{key:0,class:"fixed inset-0 bg-black/30 z-30 md:hidden",onClick:o[0]||(o[0]=m=>d("close"))})):y("",!0)]),_:1}),e("aside",{class:A(["fixed left-0 top-14 bottom-0 w-60 bg-white border-r border-gray-200 transition-transform duration-300 z-40",[t.open?"translate-x-0":"-translate-x-full",{"md:translate-x-0":t.open}]])},[e("nav",we,[(i(),c(H,null,ne(l,(m,h)=>(i(),c(H,{key:h},[m.divider?(i(),c("div",ke)):(i(),$(f,{key:1,to:{name:m.name},class:A(["flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",z(u).name===m.name?"bg-primary-50 text-primary-700":m.warning?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-100"]),onClick:v},{default:S(()=>[e("span",xe,[m.icon==="clipboard"?(i(),c("svg",_e,[...o[1]||(o[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)])])):m.icon==="alert"?(i(),c("svg",Ce,[...o[2]||(o[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])])):m.icon==="pause"?(i(),c("svg",Se,[...o[3]||(o[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):m.icon==="check"?(i(),c("svg",Ee,[...o[4]||(o[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):m.icon==="document"?(i(),c("svg",Ie,[...o[5]||(o[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])):m.icon==="history"?(i(),c("svg",Le,[...o[6]||(o[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):m.icon==="user"?(i(),c("svg",De,[...o[7]||(o[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])])):m.icon==="users"?(i(),c("svg",Me,[...o[8]||(o[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):m.icon==="building"?(i(),c("svg",Te,[...o[9]||(o[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)])])):m.icon==="folder"?(i(),c("svg",$e,[...o[10]||(o[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):m.icon==="trash"?(i(),c("svg",Be,[...o[11]||(o[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])):y("",!0)]),e("span",null,k(m.label),1)]),_:2},1032,["to","class"]))],64))),64))])],2)],64)}}}),Ae={class:"fixed top-0 left-0 right-0 h-14 bg-white border-b border-gray-200 z-50"},Re={class:"flex items-center justify-between h-full px-4"},Oe={class:"flex items-center gap-4"},Pe={class:"flex items-center gap-4"},je={class:"text-sm text-gray-600"},Ve=I({__name:"Header",props:{isMobile:{type:Boolean}},emits:["toggle-sidebar"],setup(t,{emit:a}){const d=a,u=se(),v=ue();async function l(){u.clearAuth(),v.push({name:"Login"})}return(p,o)=>{var f;return i(),c("header",Ae,[e("div",Re,[e("div",Oe,[e("button",{class:"p-2 hover:bg-gray-100 rounded-lg md:hidden",onClick:o[0]||(o[0]=m=>d("toggle-sidebar"))},[...o[1]||(o[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),o[2]||(o[2]=e("h1",{class:"text-lg font-semibold text-gray-900"},"TaskFlow",-1))]),e("div",Pe,[e("span",je,k((f=z(u).user)==null?void 0:f.name),1),e("button",{class:"text-sm text-gray-500 hover:text-gray-700",onClick:l}," 로그아웃 ")])])])}}}),Ne={key:0,class:"fixed inset-0 z-modal flex items-center justify-center p-4"},We={key:0,class:"flex items-center justify-between px-4 py-3 border-b border-gray-200"},He={class:"text-[14px] font-semibold text-gray-900"},Ue={class:"px-4 py-4 text-[13px] text-gray-700"},Ke={key:1,class:"flex items-center justify-end gap-2 px-4 py-3 border-t border-gray-200 bg-gray-50 rounded-b-lg"},Fe=I({__name:"Modal",props:{modelValue:{type:Boolean},title:{default:""},size:{default:"md"},closable:{type:Boolean,default:!0},closeOnBackdrop:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},confirmText:{default:"확인"},cancelText:{default:"취소"},confirmVariant:{default:"primary"},confirmLoading:{type:Boolean,default:!1},confirmDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel","close"],setup(t,{emit:a}){const d=t,u=a,v={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};function l(){u("update:modelValue",!1),u("close")}function p(){d.closeOnBackdrop&&l()}function o(){u("confirm")}function f(){u("cancel"),l()}function m(h){h.key==="Escape"&&d.closeOnEscape&&d.modelValue&&l()}return ae(()=>d.modelValue,h=>{h?document.body.style.overflow="hidden":document.body.style.overflow=""}),U(()=>{document.addEventListener("keydown",m)}),K(()=>{document.removeEventListener("keydown",m),document.body.style.overflow=""}),(h,g)=>(i(),$(F,{to:"body"},[w(V,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:S(()=>[t.modelValue?(i(),c("div",Ne,[e("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:p}),w(V,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:S(()=>[t.modelValue?(i(),c("div",{key:0,class:A(["relative bg-white rounded-lg shadow-xl w-full",v[t.size]]),onClick:g[0]||(g[0]=P(()=>{},["stop"]))},[t.title||t.closable?(i(),c("div",We,[e("h3",He,k(t.title),1),t.closable?(i(),c("button",{key:0,type:"button",class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",onClick:l},[...g[1]||(g[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):y("",!0)])):y("",!0),e("div",Ue,[Y(h.$slots,"default")]),t.showFooter?(i(),c("div",Ke,[Y(h.$slots,"footer",{},()=>[w(Q,{variant:"secondary",size:"md",onClick:f},{default:S(()=>[j(k(t.cancelText),1)]),_:1}),w(Q,{variant:t.confirmVariant,size:"md",loading:t.confirmLoading,disabled:t.confirmDisabled,onClick:o},{default:S(()=>[j(k(t.confirmText),1)]),_:1},8,["variant","loading","disabled"])])])):y("",!0)],2)):y("",!0)]),_:3})])):y("",!0)]),_:3})]))}}),Je={class:"fixed bottom-4 right-4 z-toast flex flex-col gap-2 pointer-events-none"},Ge={class:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xe=["d"],Ye={class:"flex-1 text-[13px] leading-5"},qe=["onClick"],Qe=I({__name:"Toast",setup(t){const a=X(),d=x(()=>a.toasts),u={success:{icon:"M5 13l4 4L19 7",class:"bg-green-600 text-white"},error:{icon:"M6 18L18 6M6 6l12 12",class:"bg-red-600 text-white"},warning:{icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",class:"bg-yellow-500 text-white"},info:{icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",class:"bg-blue-600 text-white"}};function v(p){a.removeToast(p)}function l(p){return u[p]||u.info}return(p,o)=>(i(),$(F,{to:"body"},[e("div",Je,[w(me,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-full","move-class":"transition duration-300 ease-out"},{default:S(()=>[(i(!0),c(H,null,ne(d.value,f=>(i(),c("div",{key:f.id,class:A(["flex items-start gap-3 px-4 py-3 rounded-lg shadow-lg min-w-[280px] max-w-md pointer-events-auto",l(f.type).class])},[(i(),c("svg",Ge,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:l(f.type).icon},null,8,Xe)])),e("p",Ye,k(f.message),1),e("button",{type:"button",class:"flex-shrink-0 p-0.5 hover:bg-white/20 rounded transition-colors",onClick:m=>v(f.id)},[...o[0]||(o[0]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,qe)],2))),128))]),_:1})])]))}}),Ze={class:"text-gray-700"},et=I({__name:"ConfirmDialog",setup(t){const a=X(),d=x(()=>a.confirmDialog.visible),u=x(()=>a.confirmDialog.options);function v(){a.resolveConfirm(!0)}function l(){a.resolveConfirm(!1)}return(p,o)=>{var f,m,h,g;return i(),$(Fe,{"model-value":d.value,title:((f=u.value)==null?void 0:f.title)||"확인",size:"sm","close-on-backdrop":!1,"confirm-text":((m=u.value)==null?void 0:m.confirmText)||"확인","cancel-text":((h=u.value)==null?void 0:h.cancelText)||"취소","confirm-variant":((g=u.value)==null?void 0:g.confirmType)==="danger"?"danger":"primary","onUpdate:modelValue":l,onConfirm:v,onCancel:l},{default:S(()=>{var _;return[e("p",Ze,k((_=u.value)==null?void 0:_.message),1)]}),_:1},8,["model-value","title","confirm-text","cancel-text","confirm-variant"])}}}),le=ve("sse",()=>{const t=C("disconnected"),a=C(null),d=C(0),u=C(null),v=C(null),l=C(!1),p=C(null),o=x(()=>t.value==="connected"),f=x(()=>t.value==="connecting"),m=x(()=>t.value==="error");function h(n){t.value=n}function g(n){a.value=n}function _(){d.value++}function E(){d.value=0}function r(n){u.value=n}function R(n){v.value=n}function L(){v.value&&(v.value.close(),v.value=null),t.value="disconnected",u.value=null}function D(){L(),a.value=null,d.value=0,M()}function O(n){p.value=n,l.value=!0}function M(){p.value=null,l.value=!1}return{status:t,lastEventTime:a,reconnectAttempts:d,subscribedBoardId:u,eventSource:v,hasConflict:l,conflictInfo:p,isConnected:o,isConnecting:f,hasError:m,setStatus:h,setLastEventTime:g,incrementReconnectAttempts:_,resetReconnectAttempts:E,setSubscribedBoardId:r,setEventSource:R,disconnect:L,reset:D,setConflict:O,clearConflict:M}}),tt="/api",Z=3e3,ot=10;function nt(){const t=le(),a=ie(),d=ye(),u=se(),v=ge();let l=null;function p(n){if(t.eventSource&&(t.eventSource.close(),t.setEventSource(null)),t.isConnecting||t.isConnected||!u.isAuthenticated)return;t.setStatus("connecting");const s=u.accessToken;let b=`${tt}/sse/subscribe`;const B=new URLSearchParams;s&&B.append("token",s),n&&B.append("boardId",n.toString()),B.toString()&&(b+=`?${B.toString()}`);const T=new EventSource(b);t.setEventSource(T),T.onopen=()=>{t.setStatus("connected"),t.resetReconnectAttempts(),t.setSubscribedBoardId(n??null),console.log("[SSE] Connected")},T.onerror=re=>{console.error("[SSE] Error:",re),T.close(),t.setEventSource(null),t.setStatus("error"),E(n)},o(T)}function o(n){n.addEventListener("item:created",s=>{f(JSON.parse(s.data))}),n.addEventListener("item:updated",s=>{m(JSON.parse(s.data))}),n.addEventListener("item:deleted",s=>{h(JSON.parse(s.data))}),n.addEventListener("property:updated",s=>{g(JSON.parse(s.data))}),n.addEventListener("comment:created",s=>{_(JSON.parse(s.data))}),n.addEventListener("heartbeat",()=>{t.setLastEventTime(new Date)})}function f(n){const s=n.data;t.setLastEventTime(new Date),s.boardId===a.currentBoardId&&a.handleSseItemCreated(s)}function m(n){const s=n.data;if(t.setLastEventTime(new Date),a.isEditing(s.itemId)){const b=a.getEditingData();if(b){t.setConflict({itemId:s.itemId,localData:b,serverData:s,updatedBy:s.updatedByName||"다른 사용자",updatedAt:s.updatedAt||new Date().toISOString()}),v.warning("다른 사용자가 이 아이템을 수정했습니다. 충돌 해결이 필요합니다.");return}}a.handleSseItemUpdated(s)}function h(n){const s=n.data;t.setLastEventTime(new Date),s.status==="DELETED"?a.handleSseItemUpdated(s):a.handleSseItemDeleted(s.itemId)}function g(n){const s=n.data;t.setLastEventTime(new Date),s.deleted?d.removePropertyDefinition(s.propertyId):d.getPropertyById(s.propertyId)?d.updatePropertyDefinition(s.propertyId,s):d.addPropertyDefinition(s)}function _(n){const s=n.data;t.setLastEventTime(new Date),s.itemId===a.selectedItemId&&v.info("새 댓글이 등록되었습니다.");const b=a.getItemById(s.itemId);b&&a.updateItemLocal(s.itemId,{commentCount:(b.commentCount||0)+1})}function E(n){if(l&&clearTimeout(l),t.reconnectAttempts>=ot){console.error("[SSE] Max reconnect attempts reached"),v.error("실시간 연결이 끊어졌습니다. 페이지를 새로고침해주세요.");return}t.incrementReconnectAttempts(),console.log(`[SSE] Reconnecting in ${Z}ms... (attempt ${t.reconnectAttempts})`),l=setTimeout(()=>{p(n)},Z)}function r(){l&&(clearTimeout(l),l=null),t.disconnect(),console.log("[SSE] Disconnected")}function R(n){t.subscribedBoardId!==n&&(r(),p(n))}function L(n){U(()=>{p(n)}),K(()=>{l&&(clearTimeout(l),l=null),r()})}async function D(n){const s=t.conflictInfo;if(!s)return!1;const{itemId:b,localData:B}=s;try{return await a.updateItem(n,b,B)?(t.clearConflict(),v.success("내 변경사항이 저장되었습니다."),!0):!1}catch{return v.error("변경사항 저장에 실패했습니다."),!1}}function O(){const n=t.conflictInfo;if(!n)return;const{itemId:s,serverData:b}=n;a.handleSseItemUpdated(b),a.stopEditing(),t.clearConflict(),v.info("서버 버전으로 적용되었습니다.")}function M(){t.clearConflict(),v.info("충돌을 무시하고 편집을 계속합니다.")}return{status:t.status,isConnected:t.isConnected,isConnecting:t.isConnecting,hasError:t.hasError,lastEventTime:t.lastEventTime,hasConflict:t.hasConflict,conflictInfo:t.conflictInfo,connect:p,disconnect:r,subscribeToBoardId:R,useAutoConnect:L,resolveKeepLocal:D,resolveUseServer:O,resolveIgnore:M}}const st={class:"conflict-dialog"},at={key:0,class:"conflict-info"},it={class:"info-row"},lt={class:"info-value"},rt={class:"info-row"},ct={class:"info-value"},dt={key:1,class:"comparison-section"},ut={class:"comparison-box local"},mt={class:"box-content"},vt={key:0,class:"content-item"},ft={class:"item-value"},pt={key:1,class:"content-item"},ht={class:"item-value"},yt={key:2,class:"text-xs text-gray-400"},gt={class:"comparison-box server"},bt={class:"box-content"},wt={key:0,class:"content-item"},kt={class:"item-value"},xt={key:1,class:"content-item"},_t={class:"item-value"},Ct=I({__name:"ConflictDialog",setup(t){const a=le(),d=ie(),{resolveKeepLocal:u,resolveUseServer:v,resolveIgnore:l}=nt(),p=x(()=>a.hasConflict),o=x(()=>a.conflictInfo),f=x(()=>d.currentBoardId);function m(E){return new Date(E).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}async function h(){f.value&&await u(f.value)}function g(){v()}function _(){l()}return(E,r)=>(i(),$(F,{to:"body"},[w(V,{name:"fade"},{default:S(()=>[p.value?(i(),c("div",{key:0,class:"conflict-overlay",onClick:P(_,["self"])},[e("div",st,[r[12]||(r[12]=e("div",{class:"dialog-header"},[e("div",{class:"header-icon"},[e("svg",{class:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),e("div",null,[e("h3",{class:"dialog-title"},"편집 충돌 발생"),e("p",{class:"dialog-subtitle"},"다른 사용자가 같은 아이템을 수정했습니다.")])],-1)),o.value?(i(),c("div",at,[e("div",it,[r[0]||(r[0]=e("span",{class:"info-label"},"수정자",-1)),e("span",lt,k(o.value.updatedBy),1)]),e("div",rt,[r[1]||(r[1]=e("span",{class:"info-label"},"수정 시간",-1)),e("span",ct,k(m(o.value.updatedAt)),1)])])):y("",!0),o.value?(i(),c("div",dt,[e("div",ut,[r[4]||(r[4]=e("div",{class:"box-header"},[e("span",{class:"box-title"},"내 변경사항"),e("span",{class:"box-badge"},"로컬")],-1)),e("div",mt,[o.value.localData.title?(i(),c("div",vt,[r[2]||(r[2]=e("span",{class:"item-label"},"제목:",-1)),e("span",ft,k(o.value.localData.title),1)])):y("",!0),o.value.localData.status?(i(),c("div",pt,[r[3]||(r[3]=e("span",{class:"item-label"},"상태:",-1)),e("span",ht,k(o.value.localData.status),1)])):y("",!0),!o.value.localData.title&&!o.value.localData.status?(i(),c("p",yt," (속성 변경) ")):y("",!0)])]),e("div",gt,[r[7]||(r[7]=e("div",{class:"box-header"},[e("span",{class:"box-title"},"서버 버전"),e("span",{class:"box-badge"},"최신")],-1)),e("div",bt,[o.value.serverData.title?(i(),c("div",wt,[r[5]||(r[5]=e("span",{class:"item-label"},"제목:",-1)),e("span",kt,k(o.value.serverData.title),1)])):y("",!0),o.value.serverData.status?(i(),c("div",xt,[r[6]||(r[6]=e("span",{class:"item-label"},"상태:",-1)),e("span",_t,k(o.value.serverData.status),1)])):y("",!0)])])])):y("",!0),e("div",{class:"resolution-section"},[r[11]||(r[11]=e("p",{class:"resolution-label"},"해결 방법을 선택하세요:",-1)),e("div",{class:"resolution-buttons"},[e("button",{type:"button",class:"btn btn-local",onClick:h},[...r[8]||(r[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),j(" 내 변경사항 유지 ",-1)])]),e("button",{type:"button",class:"btn btn-server",onClick:g},[...r[9]||(r[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),j(" 서버 버전 사용 ",-1)])]),e("button",{type:"button",class:"btn btn-ignore",onClick:_},[...r[10]||(r[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),j(" 무시하고 계속 편집 ",-1)])])])]),r[13]||(r[13]=e("p",{class:"help-text"}," '내 변경사항 유지'를 선택하면 서버의 변경사항을 덮어씁니다. ",-1))])])):y("",!0)]),_:1})]))}}),St=be(Ct,[["__scopeId","data-v-0012661d"]]),Et={class:"flex-1 h-full overflow-hidden"},It={key:0,class:"absolute left-8 top-4 px-2 py-1 bg-gray-800 text-white text-xs rounded shadow-lg z-50"},ee="taskflow_panel_width",te=700,J=.92,oe=1200,Lt=I({__name:"SlideOverPanel",setup(t){const a=X(),d={ItemDetail:N(()=>W(()=>import("./ItemDetailPanel--bcWtBE6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),ItemDetailPanel:N(()=>W(()=>import("./ItemDetailPanel--bcWtBE6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),ItemEdit:N(()=>W(()=>import("./ItemDetailPanel--bcWtBE6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),ItemCreate:N(()=>W(()=>import("./ItemDetailPanel--bcWtBE6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])))},u=x(()=>a.slideOverPanel.visible),v=x(()=>a.slideOverPanel.component),l=x(()=>v.value?d[v.value]:null),p=x(()=>a.slideOverPanel.props),o=C(oe),f=C(!1);function m(){const n=localStorage.getItem(ee);if(n){const s=parseInt(n,10);!isNaN(s)&&s>=te&&(o.value=Math.min(s,window.innerWidth*J))}}function h(){localStorage.setItem(ee,o.value.toString())}function g(){a.closeSlideOver()}function _(n){n.key==="Escape"&&u.value&&g()}function E(n){f.value||g()}function r(n){n.stopPropagation()}function R(n){n.preventDefault(),n.stopPropagation(),f.value=!0,document.body.style.cursor="ew-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",L),document.addEventListener("mouseup",D)}function L(n){if(!f.value)return;const s=window.innerWidth*J,b=window.innerWidth-n.clientX;o.value=Math.max(te,Math.min(b,s))}function D(){f.value&&(f.value=!1,document.body.style.cursor="",document.body.style.userSelect="",h()),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",D)}function O(){o.value=oe,h()}function M(){const n=window.innerWidth*J;o.value>n&&(o.value=n)}return U(()=>{document.addEventListener("keydown",_),window.addEventListener("resize",M),m()}),K(()=>{document.removeEventListener("keydown",_),window.removeEventListener("resize",M),D()}),ae(u,n=>{n?document.body.style.overflow="hidden":document.body.style.overflow=""}),(n,s)=>(i(),$(F,{to:"body"},[w(V,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:S(()=>[u.value?(i(),c("div",{key:0,class:"fixed inset-0 z-50 overflow-hidden",onClick:E},[e("div",{class:"absolute inset-0 bg-black/30",style:q({right:`${o.value}px`})},null,4),e("div",{class:"absolute inset-y-0 right-0 flex bg-white shadow-2xl",style:q({width:`${o.value}px`}),onClick:r},[e("div",{class:A(["w-5 flex-shrink-0 bg-gray-300 hover:bg-primary-400 cursor-ew-resize flex items-center justify-center group border-r-2 border-gray-400 transition-colors",{"bg-primary-500":f.value}]),onMousedown:P(R,["stop","prevent"]),onDblclick:P(O,["stop"]),onClick:s[0]||(s[0]=P(()=>{},["stop"]))},[...s[1]||(s[1]=[e("div",{class:"flex flex-col gap-1.5"},[e("div",{class:"w-1.5 h-1.5 rounded-full bg-gray-500 group-hover:bg-white"}),e("div",{class:"w-1.5 h-1.5 rounded-full bg-gray-500 group-hover:bg-white"}),e("div",{class:"w-1.5 h-1.5 rounded-full bg-gray-500 group-hover:bg-white"}),e("div",{class:"w-1.5 h-1.5 rounded-full bg-gray-500 group-hover:bg-white"}),e("div",{class:"w-1.5 h-1.5 rounded-full bg-gray-500 group-hover:bg-white"})],-1)])],34),e("div",Et,[l.value?(i(),$(fe(l.value),pe({key:0},p.value,{onClose:g}),null,16)):y("",!0)]),f.value?(i(),c("div",It,k(o.value)+"px ",1)):y("",!0)],4)])):y("",!0)]),_:1})]))}}),Dt={class:"min-h-screen bg-gray-50"},Mt={class:"flex pt-14"},Tt={class:"p-4 h-[calc(100vh-3.5rem)]"},G=768,jt=I({__name:"MainLayout",setup(t){const a=C(window.innerWidth>=G),d=C(window.innerWidth<G);function u(){a.value=!a.value}function v(){d.value&&(a.value=!1)}function l(){const p=window.innerWidth<G;p!==d.value&&(d.value=p,a.value=!p)}return U(()=>{window.addEventListener("resize",l),l()}),K(()=>{window.removeEventListener("resize",l)}),(p,o)=>(i(),c("div",Dt,[w(Ve,{"is-mobile":d.value,onToggleSidebar:u},null,8,["is-mobile"]),e("div",Mt,[w(ze,{open:a.value,"is-mobile":d.value,onClose:v},null,8,["open","is-mobile"]),e("main",{class:A(["flex-1 transition-all duration-300 ml-0 md:ml-60",{"md:ml-0":!a.value}])},[e("div",Tt,[w(z(he))])],2)]),w(Lt),w(z(Qe)),w(z(et)),w(z(St))]))}});export{jt as default};
