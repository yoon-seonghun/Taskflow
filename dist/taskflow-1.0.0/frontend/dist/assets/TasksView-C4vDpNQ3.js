import{u as Ie}from"./board-BqBw7K7S.js";import{a as me,i as ee,g as fe,u as se}from"./property-BhXlHRz_.js";import{u as ae}from"./useToast-BaLNVjwd.js";import{_ as ve}from"./Select.vue_vue_type_script_setup_true_lang-CpAO5_7Q.js";import{d as Q,r as N,c as M,o as de,A as ye,f as r,i as y,g as e,k as K,p as U,t as g,q as G,m as J,l as ie,L as ue,F,s as X,T as le,M as ge,n as t,C as _e,I as oe,w as q,N as re,x as W,j as Y,z as xe}from"./index-D8qsMxsh.js";import"./MarkdownEditor.vue_vue_type_style_index_0_scoped_f90f4426_lang-Bc65I5vA.js";import{_ as ce}from"./Spinner.vue_vue_type_script_setup_true_lang-i4Z96JvV.js";import{u as Ee}from"./department-BGEZLTkT.js";import{u as he}from"./useSlideOver-DM1nQhnY.js";import{u as $e}from"./useConfirm-tRg9u8MQ.js";import{_ as ke}from"./EmptyState.vue_vue_type_script_setup_true_lang-DF03tBGG.js";import{_ as De}from"./DatePicker.vue_vue_type_script_setup_true_lang-D-7PTvoP.js";import{_ as Me}from"./Badge.vue_vue_type_script_setup_true_lang-BICiYF9q.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{t as be}from"./template-GTpC92te.js";import{_ as Be}from"./Button.vue_vue_type_script_setup_true_lang-CsKUyp59.js";import"./item-CAonLf5Y.js";import"./department-Dz_c4A8s.js";const Ne={key:0,class:"block text-[13px] font-medium text-gray-700 mb-1"},Le={key:0,class:"text-red-500 ml-0.5"},Re=["disabled"],Se={key:0,class:"flex items-center gap-2 truncate"},je={class:"w-5 h-5 rounded-full bg-primary-100 text-primary-700 text-[10px] font-medium flex items-center justify-center flex-shrink-0"},Pe={class:"truncate"},Oe={key:0,class:"text-gray-400 text-[11px]"},Ve={key:1,class:"text-gray-400 truncate"},Ae={class:"flex items-center gap-1 flex-shrink-0"},ze={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{"min-width":"240px"}},Ue={class:"p-2 border-b border-gray-100 space-y-2"},He={key:0,class:"flex flex-wrap gap-1"},Ge=["onClick"],Fe={class:"overflow-y-auto max-h-48"},Ke=["onClick","onMouseenter"],We={class:"w-6 h-6 rounded-full bg-gray-200 text-gray-600 text-[11px] font-medium flex items-center justify-center flex-shrink-0"},qe={class:"flex-1 min-w-0"},Ye={class:"truncate font-medium"},Xe={key:0,class:"truncate text-[11px] text-gray-400"},Qe={key:0,class:"w-4 h-4 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Je={key:0,class:"px-3 py-4 text-center text-gray-500 text-[13px]"},Ze={key:1,class:"mt-1 text-xs text-red-500"},et=Q({__name:"UserSelect",props:{modelValue:{default:null},users:{default:()=>[]},departments:{default:()=>[]},size:{default:"md"},placeholder:{default:"담당자 선택"},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{},label:{},required:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(s,{emit:P}){const o=s,m=P,u=N(!1),n=N(""),d=N(null),h=N(-1),D=N(null),w=N(null),x=M(()=>o.users.find(a=>a.userId===o.modelValue)),f=M(()=>d.value?o.users.filter(a=>a.departmentId===d.value):o.users),k=M(()=>{if(!n.value)return f.value;const a=n.value.toLowerCase();return f.value.filter($=>$.userName.toLowerCase().includes(a)||$.departmentName&&$.departmentName.toLowerCase().includes(a))}),I=M(()=>{const a=["w-full rounded border transition-all duration-150","flex items-center justify-between gap-2","focus:outline-none focus:ring-2 focus:border-transparent","text-left"],$={sm:"px-2 py-1 text-xs h-7",md:"px-3 py-1.5 text-[13px] h-8",lg:"px-3 py-2 text-sm h-9"},_=o.error?"border-red-500 focus:ring-red-500":u.value?"border-primary-500 ring-2 ring-primary-500":"border-gray-300 focus:ring-primary-500",b=o.disabled?"bg-gray-100 cursor-not-allowed text-gray-500":"bg-white cursor-pointer hover:border-gray-400";return[...a,$[o.size],_,b].join(" ")});function i(){o.disabled||(u.value=!u.value,u.value&&(n.value="",h.value=-1,ge(()=>{var a;(a=w.value)==null||a.focus()})))}function L(){u.value=!1,n.value=""}function O(a){m("update:modelValue",a.userId),m("change",a.userId),L()}function S(a){a.stopPropagation(),m("update:modelValue",null),m("change",null)}function z(a){d.value=a,h.value=-1}function p(a){if(!u.value){(a.key==="Enter"||a.key===" "||a.key==="ArrowDown")&&(a.preventDefault(),i());return}switch(a.key){case"ArrowDown":a.preventDefault(),h.value=Math.min(h.value+1,k.value.length-1);break;case"ArrowUp":a.preventDefault(),h.value=Math.max(h.value-1,0);break;case"Enter":a.preventDefault(),h.value>=0&&k.value[h.value]&&O(k.value[h.value]);break;case"Escape":L();break}}function c(a){D.value&&!D.value.contains(a.target)&&L()}return de(()=>{document.addEventListener("click",c)}),ye(()=>{document.removeEventListener("click",c)}),(a,$)=>(t(),r("div",{ref_key:"containerRef",ref:D,class:"relative w-full"},[s.label?(t(),r("label",Ne,[U(g(s.label)+" ",1),s.required?(t(),r("span",Le,"*")):y("",!0)])):y("",!0),e("button",{type:"button",class:G(I.value),disabled:s.disabled,onClick:i,onKeydown:p},[x.value?(t(),r("span",Se,[e("span",je,g(x.value.userName.charAt(0)),1),e("span",Pe,g(x.value.userName),1),x.value.departmentName?(t(),r("span",Oe," ("+g(x.value.departmentName)+") ",1)):y("",!0)])):(t(),r("span",Ve,g(s.placeholder),1)),e("div",Ae,[s.clearable&&x.value&&!s.disabled?(t(),r("span",{key:0,class:"text-gray-400 hover:text-gray-600 p-0.5",onClick:S},[...$[2]||($[2]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):y("",!0),(t(),r("svg",{class:G(["w-4 h-4 text-gray-400 transition-transform",{"rotate-180":u.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...$[3]||($[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],42,Re),K(le,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:J(()=>[u.value?(t(),r("div",ze,[e("div",Ue,[ie(e("input",{ref_key:"searchInputRef",ref:w,"onUpdate:modelValue":$[0]||($[0]=_=>n.value=_),type:"text",class:"w-full px-2 py-1.5 text-[13px] border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"이름 또는 부서로 검색...",onKeydown:p},null,544),[[ue,n.value]]),s.departments.length>0?(t(),r("div",He,[e("button",{type:"button",class:G(["px-2 py-1 text-[11px] rounded-full transition-colors",d.value===null?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"]),onClick:$[1]||($[1]=_=>z(null))}," 전체 ",2),(t(!0),r(F,null,X(s.departments,_=>(t(),r("button",{key:_.departmentId,type:"button",class:G(["px-2 py-1 text-[11px] rounded-full transition-colors",d.value===_.departmentId?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"]),onClick:b=>z(_.departmentId)},g(_.departmentName),11,Ge))),128))])):y("",!0)]),e("div",Fe,[(t(!0),r(F,null,X(k.value,(_,b)=>(t(),r("div",{key:_.userId,class:G(["px-3 py-2 text-[13px] cursor-pointer flex items-center gap-2",["hover:bg-gray-50",h.value===b?"bg-gray-100":"",_.userId===s.modelValue?"bg-primary-50 text-primary-700":"text-gray-700"]]),onClick:C=>O(_),onMouseenter:C=>h.value=b},[e("span",We,g(_.userName.charAt(0)),1),e("div",qe,[e("div",Ye,g(_.userName),1),_.departmentName?(t(),r("div",Xe,g(_.departmentName),1)):y("",!0)]),_.userId===s.modelValue?(t(),r("svg",Qe,[...$[4]||($[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):y("",!0)],42,Ke))),128)),k.value.length===0?(t(),r("div",Je,[n.value?(t(),r(F,{key:0},[U("검색 결과가 없습니다")],64)):(t(),r(F,{key:1},[U("사용자가 없습니다")],64))])):y("",!0)])])):y("",!0)]),_:1}),s.error&&s.errorMessage?(t(),r("p",Ze,g(s.errorMessage),1)):y("",!0)],512))}}),tt={key:0,class:"block text-[13px] font-medium text-gray-700 mb-1"},rt={key:0,class:"text-red-500 ml-0.5"},ot={class:"relative"},st={key:0,class:"absolute left-2.5 top-1/2 -translate-y-1/2 pointer-events-none"},at=["value","placeholder","disabled"],lt={key:1,class:"absolute right-2 top-1/2 -translate-y-1/2"},nt={key:2,class:"absolute right-2 top-1/2 -translate-y-1/2"},it={key:0,class:"px-3 py-4 text-center text-[13px] text-gray-500"},ut=["onClick","onMouseenter"],dt={class:"text-[13px] font-medium truncate"},ct={key:0,class:"text-[11px] text-gray-500 truncate mt-0.5"},pt={key:0,class:"px-3 py-4 text-center text-[13px] text-gray-500"},mt={class:"text-[13px]"},ft={key:1,class:"mt-1 text-xs text-red-500"},vt=Q({__name:"Autocomplete",props:{modelValue:{},options:{default:()=>[]},size:{default:"md"},placeholder:{default:"입력하세요..."},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{},label:{},required:{type:Boolean,default:!1},minChars:{default:2},debounceMs:{default:300},maxResults:{default:10},allowCreate:{type:Boolean,default:!1},createLabel:{default:"새로 등록"},emptyMessage:{default:"검색 결과가 없습니다"}},emits:["update:modelValue","search","select","create","focus","blur","enter"],setup(s,{expose:P,emit:o}){const m=s,u=o,n=N(!1),d=N(-1),h=N(null),D=N(null),w=N(null);let x=null;const f=M({get:()=>m.modelValue,set:l=>u("update:modelValue",l)}),k=M(()=>m.options.slice(0,m.maxResults)),I=M(()=>f.value.length>=m.minChars),i=M(()=>{if(!m.allowCreate||!f.value.trim())return!1;const l=f.value.toLowerCase().trim();return!m.options.some(A=>A.label.toLowerCase()===l)}),L=M(()=>n.value&&I.value&&(k.value.length>0||m.loading||i.value)),O=M(()=>{const l=["w-full rounded border transition-all duration-150","focus:outline-none focus:ring-2 focus:border-transparent","placeholder:text-gray-400"],A={sm:"px-2 py-1 text-xs h-7",md:"px-3 py-1.5 text-[13px] h-8",lg:"px-3 py-2 text-sm h-9"},j=m.error?"border-red-500 focus:ring-red-500":n.value?"border-primary-500 ring-2 ring-primary-500":"border-gray-300 focus:ring-primary-500",v=m.disabled?"bg-gray-100 cursor-not-allowed text-gray-500":"bg-white";return[...l,A[m.size],j,v].join(" ")});function S(l){const A=l.target;if(f.value=A.value,x&&clearTimeout(x),A.value.length<m.minChars){n.value=!1,d.value=-1;return}x=setTimeout(()=>{u("search",A.value),n.value=!0,d.value=-1},m.debounceMs)}function z(){u("focus"),I.value&&k.value.length>0&&(n.value=!0)}function p(){setTimeout(()=>{n.value=!1,d.value=-1,u("blur")},200)}function c(l){f.value=l.label,u("select",l),n.value=!1,d.value=-1}function a(){const l=f.value.trim();l&&(u("create",l),n.value=!1,d.value=-1)}function $(l){if(!n.value){l.key==="ArrowDown"&&I.value?(n.value=!0,d.value=0,l.preventDefault()):l.key==="Enter"&&u("enter");return}const A=k.value.length+(i.value?1:0);switch(l.key){case"ArrowDown":l.preventDefault(),d.value=Math.min(d.value+1,A-1),_();break;case"ArrowUp":l.preventDefault(),d.value=Math.max(d.value-1,0),_();break;case"Enter":l.preventDefault(),d.value>=0&&d.value<k.value.length?c(k.value[d.value]):i.value&&d.value===k.value.length?a():u("enter");break;case"Escape":n.value=!1,d.value=-1;break}}function _(){ge(()=>{if(w.value&&d.value>=0){const A=w.value.querySelectorAll("[data-option]")[d.value];A&&A.scrollIntoView({block:"nearest"})}})}function b(l){h.value&&!h.value.contains(l.target)&&(n.value=!1,d.value=-1)}function C(){var l;(l=D.value)==null||l.focus()}function T(){f.value="",n.value=!1,d.value=-1}return de(()=>{document.addEventListener("click",b)}),ye(()=>{document.removeEventListener("click",b),x&&clearTimeout(x)}),P({focus:C,clear:T}),(l,A)=>(t(),r("div",{ref_key:"containerRef",ref:h,class:"relative w-full"},[s.label?(t(),r("label",tt,[U(g(s.label)+" ",1),s.required?(t(),r("span",rt,"*")):y("",!0)])):y("",!0),e("div",ot,[l.$slots.prefix?(t(),r("div",st,[_e(l.$slots,"prefix")])):y("",!0),e("input",{ref_key:"inputRef",ref:D,type:"text",value:f.value,class:G([O.value,l.$slots.prefix?"pl-8":""]),placeholder:s.placeholder,disabled:s.disabled,autocomplete:"off",onInput:S,onFocus:z,onBlur:p,onKeydown:$},null,42,at),s.loading?(t(),r("div",lt,[...A[1]||(A[1]=[e("svg",{class:"w-4 h-4 text-gray-400 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):f.value?y("",!0):(t(),r("div",nt,[...A[2]||(A[2]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)])]))]),K(le,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:J(()=>[L.value?(t(),r("div",{key:0,ref_key:"dropdownRef",ref:w,class:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},[s.loading?(t(),r("div",it," 검색 중... ")):(t(),r(F,{key:1},[(t(!0),r(F,null,X(k.value,(j,v)=>(t(),r("div",{key:j.value,"data-option":"",class:G(["px-3 py-2 cursor-pointer transition-colors",[d.value===v?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"]]),onClick:E=>c(j),onMouseenter:E=>d.value=v},[e("div",dt,g(j.label),1),j.description?(t(),r("div",ct,g(j.description),1)):y("",!0)],42,ut))),128)),k.value.length===0&&!i.value?(t(),r("div",pt,g(s.emptyMessage),1)):y("",!0),i.value?(t(),r("div",{key:1,"data-option":"",class:G(["px-3 py-2 cursor-pointer border-t border-gray-100 transition-colors flex items-center gap-2",[d.value===k.value.length?"bg-primary-50 text-primary-700":"text-primary-600 hover:bg-primary-50"]]),onClick:a,onMouseenter:A[0]||(A[0]=j=>d.value=k.value.length)},[A[3]||(A[3]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),e("span",mt,'"'+g(f.value)+'" '+g(s.createLabel),1)],34)):y("",!0)],64))],512)):y("",!0)]),_:1}),s.error&&s.errorMessage?(t(),r("p",ft,g(s.errorMessage),1)):y("",!0)],512))}}),yt={class:"w-4 h-4 mr-1.5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt=["d"],xt={class:"truncate flex-1"},ht={key:0,class:"text-red-500 ml-0.5"},kt={key:3,class:"my-1 border-t border-gray-100"},bt=Q({__name:"PropertyHeader",props:{property:{},boardId:{default:0},sortable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},width:{default:150},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["rename","changeType","moveLeft","moveRight","hide","delete","addProperty","sort","resize"],setup(s,{emit:P}){const o=s,m=P;me(),ae();const u=N(!1),n=N(!1),d=N(""),h=N(!1),D=N(!1),w=N(null),x=N(null),f=N(null),k={TEXT:"M4 6h16M4 12h16M4 18h7",NUMBER:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14",DATE:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",SELECT:"M19 9l-7 7-7-7",MULTI_SELECT:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",CHECKBOX:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",USER:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},I=M(()=>k[o.property.propertyType]||k.TEXT),i=M(()=>o.property.systemYn==="Y");function L(){u.value=!u.value}function O(){u.value=!1}function S(){d.value=o.property.propertyName,n.value=!0,ge(()=>{var T,l;(T=f.value)==null||T.focus(),(l=f.value)==null||l.select()})}function z(){h.value=!0}function p(){m("moveLeft",o.property.propertyId),O()}function c(){m("moveRight",o.property.propertyId),O()}function a(){m("hide",o.property.propertyId),O()}function $(){D.value=!0}function _(){m("addProperty"),O()}function b(T){m("sort",o.property.propertyId,T),O()}function C(T){w.value&&!w.value.contains(T.target)&&O()}return de(()=>{document.addEventListener("click",C)}),ye(()=>{document.removeEventListener("click",C)}),(T,l)=>(t(),r("div",{ref_key:"containerRef",ref:w,class:"relative flex items-center h-8 px-2 text-[13px] font-medium text-gray-600 bg-gray-50 border-b border-r border-gray-200 select-none cursor-pointer hover:bg-gray-100 transition-colors",style:oe({width:`${s.width}px`,minWidth:`${s.width}px`}),onClick:L},[(t(),r("svg",yt,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:I.value},null,8,gt)])),e("span",xt,g(s.property.propertyName),1),s.property.requiredYn==="Y"?(t(),r("span",ht,"*")):y("",!0),K(le,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:J(()=>[u.value?(t(),r("div",{key:0,ref_key:"menuRef",ref:x,class:"absolute top-full left-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",onClick:l[2]||(l[2]=q(()=>{},["stop"]))},[s.sortable?(t(),r(F,{key:0},[e("button",{class:"w-full px-3 py-1.5 text-left text-[13px] text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:l[0]||(l[0]=A=>b("asc"))},[...l[3]||(l[3]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})],-1),U(" 오름차순 정렬 ",-1)])]),e("button",{class:"w-full px-3 py-1.5 text-left text-[13px] text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:l[1]||(l[1]=A=>b("desc"))},[...l[4]||(l[4]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})],-1),U(" 내림차순 정렬 ",-1)])]),l[5]||(l[5]=e("div",{class:"my-1 border-t border-gray-100"},null,-1))],64)):y("",!0),i.value?y("",!0):(t(),r("button",{key:1,class:"w-full px-3 py-1.5 text-left text-[13px] text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:S},[...l[6]||(l[6]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),U(" 속성 이름 변경 ",-1)])])),i.value?y("",!0):(t(),r("button",{key:2,class:"w-full px-3 py-1.5 text-left text-[13px] text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:z},[...l[7]||(l[7]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1),U(" 속성 타입 변경 ",-1)])])),i.value?y("",!0):(t(),r("div",kt)),e("button",{class:"w-full px-3 py-1.5 text-left text-[13px] text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:p},[...l[8]||(l[8]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})],-1),U(" 왼쪽으로 이동 ",-1)])]),e("button",{class:"w-full px-3 py-1.5 text-left text-[13px] text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:c},[...l[9]||(l[9]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 5l7 7-7 7M5 5l7 7-7 7"})],-1),U(" 오른쪽으로 이동 ",-1)])]),l[13]||(l[13]=e("div",{class:"my-1 border-t border-gray-100"},null,-1)),e("button",{class:"w-full px-3 py-1.5 text-left text-[13px] text-gray-700 hover:bg-gray-50 flex items-center gap-2",onClick:a},[...l[10]||(l[10]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})],-1),U(" 숨기기 ",-1)])]),l[14]||(l[14]=e("div",{class:"my-1 border-t border-gray-100"},null,-1)),e("button",{class:"w-full px-3 py-1.5 text-left text-[13px] text-primary-600 hover:bg-primary-50 flex items-center gap-2",onClick:_},[...l[11]||(l[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),U(" 새 속성 추가 ",-1)])]),i.value?y("",!0):(t(),r("button",{key:4,class:"w-full px-3 py-1.5 text-left text-[13px] text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:$},[...l[12]||(l[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),U(" 속성 삭제 ",-1)])]))],512)):y("",!0)]),_:1})],4))}}),wt={class:"truncate text-[13px] text-gray-900 flex-1"},Ct=["title"],It=["onClick"],$t=["onBlur","onKeydown"],Mt={key:1,class:"truncate text-[13px] text-gray-700 cursor-pointer hover:text-primary-600"},Tt=["onBlur","onKeydown"],_t={key:1,class:"truncate text-[13px] text-gray-700 cursor-pointer hover:text-primary-600"},Et={key:4,class:"flex flex-wrap gap-1"},Dt=["checked","onChange"],Bt={class:"w-16 min-w-[64px] px-2 flex items-center justify-center h-full border-r border-gray-200"},Nt={class:"flex items-center gap-1 text-[13px] text-gray-500"},Lt={class:"w-20 min-w-[80px] px-2 flex items-center justify-center gap-1 h-full"},we=Q({__name:"ItemRow",props:{item:{},properties:{},propertyWidths:{},sharedUsers:{},departments:{},selected:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1}},emits:["click","update","updateProperty","complete","delete","restore"],setup(s,{emit:P}){const o=s,m=P,u=N(null),n=N(null),d=N(null),h=N(null),D=M(()=>ee(o.item)),w=M(()=>fe(o.item)),x=M(()=>o.item.status==="COMPLETED"||o.item.status==="DELETED"),f=M(()=>["flex items-center h-8 border-b border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",o.selected?"bg-primary-50":"",x.value?"opacity-60":""]);function k(j,v){j.stopPropagation(),I(v)}function I(j){if(!x.value)switch(u.value=j,j){case"title":n.value=o.item.title;break;case"status":n.value=o.item.status;break;case"priority":n.value=o.item.priority;break;case"startTime":n.value=o.item.startTime;break;case"endTime":n.value=o.item.endTime;break;case"assigneeId":n.value=o.item.assigneeId;break}}function i(){if(!u.value)return;const j=u.value,v=n.value;v!==p(j)&&m("update",o.item.itemId,j,v),u.value=null,n.value=null}function L(){u.value=null,n.value=null}function O(j){x.value||(d.value=j,h.value=_(j))}function S(j){if(d.value!==j)return;const v=_(j);h.value!==v&&m("updateProperty",o.item.itemId,j,h.value),d.value=null,h.value=null}function z(){d.value=null,h.value=null}function p(j){switch(j){case"title":return o.item.title;case"status":return o.item.status;case"priority":return o.item.priority;case"startTime":return o.item.startTime;case"endTime":return o.item.endTime;case"assigneeId":return o.item.assigneeId;default:return null}}function c(j,v){m("updateProperty",o.item.itemId,j,v)}const a={NOT_STARTED:10,IN_PROGRESS:11,COMPLETED:12,DELETED:13,PENDING:10},$={URGENT:20,HIGH:21,NORMAL:22,LOW:23};function _(j){var H;const v=(H=o.item.propertyValues)==null?void 0:H[j];if(v!=null)return v;const E=o.properties.find(te=>te.propertyId===j);return E?E.propertyName==="상태"&&o.item.status?a[o.item.status]??null:E.propertyName==="우선순위"&&o.item.priority?$[o.item.priority]??null:E.propertyType==="USER"&&o.item.assigneeId?o.item.assigneeId:E.propertyName==="시작일"&&o.item.startTime?o.item.startTime:E.propertyName==="마감일"&&o.item.endTime?o.item.endTime:null:null}function b(j){return j.options?j.options.filter(v=>v.useYn==="Y").map(v=>({value:v.optionId,label:v.optionName,color:v.color})):[]}function C(){m("complete",o.item.itemId)}function T(){m("delete",o.item.itemId)}function l(){m("restore",o.item.itemId)}function A(){m("click",o.item)}return(j,v)=>(t(),r("div",{class:G(f.value),onClick:A},[e("div",{class:"group/title flex-1 min-w-[200px] px-2 flex items-center gap-2 h-full border-r border-gray-200 relative",onClick:v[2]||(v[2]=q(E=>k(E,"title"),["stop"]))},[u.value==="title"?ie((t(),r("input",{key:0,"onUpdate:modelValue":v[0]||(v[0]=E=>n.value=E),type:"text",class:"w-full h-7 px-2 text-[13px] border border-primary-500 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",onBlur:i,onKeydown:[re(i,["enter"]),re(L,["escape"])],onClick:v[1]||(v[1]=q(()=>{},["stop"])),autofocus:""},null,544)),[[ue,n.value]]):(t(),r(F,{key:1},[e("span",wt,g(s.item.title),1),D.value?(t(),r("span",{key:0,class:"flex-shrink-0 inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-medium text-red-700 bg-red-100 rounded",title:`마감일 ${w.value}일 초과`},[v[11]||(v[11]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),U(" "+g(w.value)+"일 지연 ",1)],8,Ct)):y("",!0),e("button",{class:"flex-shrink-0 opacity-0 group-hover/title:opacity-100 transition-opacity px-1.5 py-0.5 text-[11px] text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded",title:"상세 패널 열기",onClick:q(A,["stop"])}," 열기 ")],64))]),(t(!0),r(F,null,X(s.properties,E=>(t(),r("div",{key:E.propertyId,class:"px-2 flex items-center h-full border-r border-gray-200",style:oe({width:`${s.propertyWidths[E.propertyId]||150}px`,minWidth:`${s.propertyWidths[E.propertyId]||150}px`}),onClick:q(H=>O(E.propertyId),["stop"])},[E.propertyType==="TEXT"?(t(),r(F,{key:0},[d.value===E.propertyId?ie((t(),r("input",{key:0,"onUpdate:modelValue":v[3]||(v[3]=H=>h.value=H),type:"text",class:"w-full h-7 px-2 text-[13px] border border-primary-500 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",onBlur:H=>S(E.propertyId),onKeydown:[re(H=>S(E.propertyId),["enter"]),re(z,["escape"])],onClick:v[4]||(v[4]=q(()=>{},["stop"])),autofocus:""},null,40,$t)),[[ue,h.value]]):(t(),r("span",Mt,g(_(E.propertyId)||"-"),1))],64)):E.propertyType==="NUMBER"?(t(),r(F,{key:1},[d.value===E.propertyId?ie((t(),r("input",{key:0,"onUpdate:modelValue":v[5]||(v[5]=H=>h.value=H),type:"number",class:"w-full h-7 px-2 text-[13px] border border-primary-500 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",onBlur:H=>S(E.propertyId),onKeydown:[re(H=>S(E.propertyId),["enter"]),re(z,["escape"])],onClick:v[6]||(v[6]=q(()=>{},["stop"])),autofocus:""},null,40,Tt)),[[ue,h.value,void 0,{number:!0}]]):(t(),r("span",_t,g(_(E.propertyId)??"-"),1))],64)):E.propertyType==="DATE"?(t(),W(Y(De),{key:2,"model-value":_(E.propertyId),size:"sm",placeholder:"-",class:"w-full","onUpdate:modelValue":H=>c(E.propertyId,H),onClick:v[7]||(v[7]=q(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"])):E.propertyType==="SELECT"?(t(),W(Y(ve),{key:3,"model-value":_(E.propertyId),options:b(E),size:"sm",placeholder:"-",clearable:"",class:"w-full","onUpdate:modelValue":H=>c(E.propertyId,H),onClick:v[8]||(v[8]=q(()=>{},["stop"]))},null,8,["model-value","options","onUpdate:modelValue"])):E.propertyType==="MULTI_SELECT"?(t(),r("div",Et,[(t(!0),r(F,null,X(_(E.propertyId)||[],H=>(t(),W(Y(Me),{key:H,size:"sm",variant:"gray"},{default:J(()=>{var te,ne;return[U(g((ne=(te=E.options)==null?void 0:te.find(B=>B.optionId===H))==null?void 0:ne.optionName),1)]}),_:2},1024))),128))])):E.propertyType==="CHECKBOX"?(t(),r("input",{key:5,type:"checkbox",checked:_(E.propertyId),class:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500",onChange:H=>c(E.propertyId,H.target.checked),onClick:v[9]||(v[9]=q(()=>{},["stop"]))},null,40,Dt)):E.propertyType==="USER"?(t(),W(Y(et),{key:6,"model-value":_(E.propertyId),users:s.sharedUsers||[],departments:s.departments||[],size:"sm",placeholder:"-",clearable:"",class:"w-full","onUpdate:modelValue":H=>c(E.propertyId,H),onClick:v[10]||(v[10]=q(()=>{},["stop"]))},null,8,["model-value","users","departments","onUpdate:modelValue"])):y("",!0)],12,It))),128)),e("div",Bt,[e("div",Nt,[v[12]||(v[12]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),e("span",null,g(s.item.commentCount||0),1)])]),e("div",Lt,[x.value?(t(),r("button",{key:0,class:"p-1.5 text-gray-400 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"복원",onClick:q(l,["stop"])},[...v[13]||(v[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])):(t(),r(F,{key:1},[e("button",{class:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"완료",onClick:q(C,["stop"])},[...v[14]||(v[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])]),e("button",{class:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"삭제",onClick:q(T,["stop"])},[...v[15]||(v[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])],64))])],2))}}),Rt={class:"flex flex-col h-full bg-white rounded-lg border border-gray-200 overflow-hidden"},St={key:0,class:"flex-1 flex items-center justify-center"},jt={key:2,class:"flex-1 overflow-auto"},Pt={class:"sticky top-0 z-10 flex bg-gray-50 border-b border-gray-200"},Ot={class:"divide-y divide-gray-200"},Vt={key:0,class:"border-t border-gray-200"},At={class:"group"},zt={class:"px-4 py-2 text-[13px] text-gray-500 cursor-pointer hover:bg-gray-50 flex items-center gap-2"},Ut={class:"bg-gray-50"},Ht=Q({__name:"ItemTable",props:{boardId:{},filter:{default:"all"}},emits:["itemClick"],setup(s,{emit:P}){const o=s,m=P,u=se(),n=me(),d=Ie(),h=Ee(),{openItemDetail:D}=he(),w=ae(),x=$e(),f=M(()=>{var R;return(((R=d.currentBoard)==null?void 0:R.sharedUsers)||[]).map(V=>({userId:V.userId,userName:V.userName,departmentId:void 0,departmentName:V.departmentName}))}),k=M(()=>h.activeFlatDepartments.map(B=>({departmentId:B.departmentId,departmentName:B.departmentName}))),I=N(null),i=N(!1),L=N({}),O=M(()=>{const B=u.activeItems;switch(o.filter){case"not_started":return B.filter(R=>R.status==="NOT_STARTED");case"in_progress":return B.filter(R=>R.status==="IN_PROGRESS");case"overdue":return B.filter(R=>ee(R));case"pending":return B.filter(R=>R.status==="PENDING");default:return B}}),S=M(()=>u.todayCompletedItems),z=M(()=>n.sortedProperties),p=M(()=>u.loading||i.value);async function c(){i.value=!0;try{await Promise.all([u.fetchItems(o.boardId),n.fetchProperties(o.boardId),h.fetchFlatDepartments({useYn:"Y"})]),z.value.forEach(B=>{L.value[B.propertyId]||(L.value[B.propertyId]=150)})}catch{w.error("데이터를 불러오는데 실패했습니다.")}finally{i.value=!1}}function a(B){I.value=B.itemId,D(B.itemId,o.boardId),m("itemClick",B)}async function $(B,R,V){await u.updateItem(o.boardId,B,{[R]:V})||w.error("업데이트에 실패했습니다.")}async function _(B,R,V){await u.updateItemProperty(o.boardId,B,R,V)||w.error("속성값 업데이트에 실패했습니다.")}async function b(B){await u.completeItem(o.boardId,B)?w.success("완료 처리되었습니다."):w.error("완료 처리에 실패했습니다.")}async function C(B){await x.show({title:"업무 삭제",message:"이 업무를 삭제하시겠습니까?",confirmText:"삭제",confirmType:"danger"})&&(await u.deleteItem(o.boardId,B)?w.success("삭제되었습니다."):w.error("삭제에 실패했습니다."))}async function T(B){await u.restoreItem(o.boardId,B)?w.success("복원되었습니다."):w.error("복원에 실패했습니다.")}function l(B){w.info("속성 이름 변경 기능 - 추후 구현")}function A(B){w.info("속성 타입 변경 기능 - 추후 구현")}async function j(B){const R=[...z.value],V=R.findIndex(Z=>Z.propertyId===B);if(V>0){const Z=R[V-1].sortOrder??V-1,pe=R[V].sortOrder??V;await n.reorderProperty(B,Z),await n.reorderProperty(R[V-1].propertyId,pe)}}async function v(B){const R=[...z.value],V=R.findIndex(Z=>Z.propertyId===B);if(V<R.length-1){const Z=R[V+1].sortOrder??V+1,pe=R[V].sortOrder??V;await n.reorderProperty(B,Z),await n.reorderProperty(R[V+1].propertyId,pe)}}async function E(B){await n.togglePropertyVisibility(B)&&w.success("속성이 숨겨졌습니다.")}async function H(B){await x.show({title:"속성 삭제",message:"이 속성을 삭제하시겠습니까? 해당 속성의 모든 데이터가 삭제됩니다.",confirmText:"삭제",confirmType:"danger"})&&(await n.deleteProperty(B)?w.success("속성이 삭제되었습니다."):w.error("속성 삭제에 실패했습니다."))}function te(){w.info("새 속성 추가 기능 - 추후 구현")}function ne(B,R){w.info(`정렬: ${R} - 추후 구현`)}return xe(()=>o.boardId,()=>{c()},{immediate:!0}),(B,R)=>(t(),r("div",Rt,[p.value?(t(),r("div",St,[K(Y(ce),{size:"lg"})])):O.value.length===0?(t(),W(Y(ke),{key:1,title:"업무가 없습니다",description:"새 업무를 추가해보세요.",icon:"clipboard",class:"flex-1"})):(t(),r("div",jt,[e("div",Pt,[R[0]||(R[0]=e("div",{class:"flex-1 min-w-[200px] px-2 h-8 flex items-center text-[13px] font-medium text-gray-600 border-r border-gray-200"},[e("svg",{class:"w-4 h-4 mr-1.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h7"})]),U(" 업무내용 ")],-1)),(t(!0),r(F,null,X(z.value,V=>(t(),W(bt,{key:V.propertyId,property:V,width:L.value[V.propertyId]||150,onRename:l,onChangeType:A,onMoveLeft:j,onMoveRight:v,onHide:E,onDelete:H,onAddProperty:te,onSort:ne},null,8,["property","width"]))),128)),R[1]||(R[1]=e("div",{class:"w-16 min-w-[64px] px-2 h-8 flex items-center justify-center text-[13px] font-medium text-gray-600 border-r border-gray-200 bg-gray-50"},[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),R[2]||(R[2]=e("div",{class:"w-20 min-w-[80px] px-2 h-8 flex items-center justify-center text-[13px] font-medium text-gray-600 bg-gray-50"}," 액션 ",-1))]),e("div",Ot,[(t(!0),r(F,null,X(O.value,V=>(t(),W(we,{key:V.itemId,item:V,properties:z.value,"property-widths":L.value,"shared-users":f.value,departments:k.value,selected:I.value===V.itemId,onClick:a,onUpdate:$,onUpdateProperty:_,onComplete:b,onDelete:C,onRestore:T},null,8,["item","properties","property-widths","shared-users","departments","selected"]))),128))]),S.value.length>0?(t(),r("div",Vt,[e("details",At,[e("summary",zt,[R[3]||(R[3]=e("svg",{class:"w-4 h-4 transition-transform group-open:rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),U(" 오늘 처리된 업무 ("+g(S.value.length)+"건) ",1)]),e("div",Ut,[(t(!0),r(F,null,X(S.value,V=>(t(),W(we,{key:V.itemId,item:V,properties:z.value,"property-widths":L.value,"shared-users":f.value,departments:k.value,selected:I.value===V.itemId,onClick:a,onUpdate:$,onUpdateProperty:_,onComplete:b,onDelete:C,onRestore:T},null,8,["item","properties","property-widths","shared-users","departments","selected"]))),128))])])])):y("",!0)]))]))}}),Gt={class:"p-3"},Ft={class:"text-[13px] font-medium text-gray-900 line-clamp-2 mb-2"},Kt={key:0,class:"flex items-center gap-1 mb-2 px-1.5 py-1 bg-red-50 border border-red-200 rounded text-[11px] text-red-700"},Wt={class:"font-medium"},qt={class:"flex flex-wrap items-center gap-2 text-[11px]"},Yt={class:"flex items-center justify-between mt-3 pt-2 border-t border-gray-100"},Xt={class:"flex items-center gap-1.5"},Qt={class:"text-[11px] text-gray-600 truncate max-w-[80px]"},Jt={class:"flex items-center gap-2"},Zt={key:0,class:"text-[11px] text-gray-500 flex items-center gap-0.5"},er={key:1,class:"text-[11px] text-gray-500 flex items-center gap-0.5"},tr=Q({__name:"ItemCard",props:{item:{},dragging:{type:Boolean,default:!1}},emits:["click","dragstart","dragend"],setup(s,{emit:P}){const o=s,m=P,u={URGENT:{bg:"bg-red-50",text:"text-red-700",border:"border-l-red-500"},HIGH:{bg:"bg-orange-50",text:"text-orange-700",border:"border-l-orange-500"},NORMAL:{bg:"bg-blue-50",text:"text-blue-700",border:"border-l-blue-500"},LOW:{bg:"bg-gray-50",text:"text-gray-600",border:"border-l-gray-400"}},n={URGENT:"긴급",HIGH:"높음",NORMAL:"보통",LOW:"낮음"},d=M(()=>ee(o.item)),h=M(()=>fe(o.item)),D=M(()=>["bg-white rounded-lg border shadow-sm cursor-grab active:cursor-grabbing","hover:shadow-md transition-shadow duration-150","border-l-4",u[o.item.priority].border,o.dragging?"opacity-50 ring-2 ring-primary-500":""]);function w(I){return I?new Date(I).toLocaleDateString("ko-KR",{month:"short",day:"numeric"}):""}function x(I){I.dataTransfer&&(I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("text/plain",String(o.item.itemId))),m("dragstart",I,o.item)}function f(I){m("dragend",I)}function k(){m("click",o.item)}return(I,i)=>(t(),r("div",{class:G(D.value),draggable:"true",onDragstart:x,onDragend:f,onClick:k},[e("div",Gt,[e("h4",Ft,g(s.item.title),1),d.value?(t(),r("div",Kt,[i[0]||(i[0]=e("svg",{class:"w-3.5 h-3.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",Wt,g(h.value)+"일 지연",1)])):y("",!0),e("div",qt,[e("span",{class:G(["px-1.5 py-0.5 rounded text-[11px] font-medium",u[s.item.priority].bg,u[s.item.priority].text])},g(n[s.item.priority]),3),s.item.groupName?(t(),r("span",{key:0,class:"px-1.5 py-0.5 rounded text-[11px] bg-gray-100 text-gray-600",style:oe(s.item.groupColor?{backgroundColor:`${s.item.groupColor}20`,color:s.item.groupColor}:{})},g(s.item.groupName),5)):y("",!0)]),e("div",Yt,[e("div",Xt,[i[1]||(i[1]=e("div",{class:"w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center"},[e("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("span",Qt,g(s.item.assigneeName||"미지정"),1)]),e("div",Jt,[s.item.dueDate?(t(),r("span",Zt,[i[2]||(i[2]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),U(" "+g(w(s.item.dueDate)),1)])):y("",!0),s.item.commentCount>0?(t(),r("span",er,[i[3]||(i[3]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),U(" "+g(s.item.commentCount),1)])):y("",!0)])])])],34))}}),rr=Te(tr,[["__scopeId","data-v-18b72665"]]),or={key:0,class:"flex flex-col items-center py-4"},sr={class:"text-[13px] font-semibold text-gray-700 writing-mode-vertical",style:{"writing-mode":"vertical-rl","text-orientation":"mixed"}},ar={class:"mt-2 text-[12px] text-gray-500 bg-white px-1.5 py-0.5 rounded-full"},lr={key:1,class:"flex items-center justify-between"},nr={class:"flex items-center gap-2"},ir={class:"text-[13px] font-semibold text-gray-700"},ur={class:"text-[12px] text-gray-500 bg-white px-1.5 py-0.5 rounded-full"},dr={key:0,class:"flex items-center justify-center h-20 text-[13px] text-gray-400 border-2 border-dashed border-gray-300 rounded-lg"},cr=Q({__name:"KanbanColumn",props:{columnId:{},title:{},items:{},color:{},count:{},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1}},emits:["itemClick","drop","addItem","toggleCollapse"],setup(s,{emit:P}){const o=s,m=P,u=N(!1),n=N(o.collapsed),d=M(()=>o.color?{borderTopColor:o.color,backgroundColor:`${o.color}08`}:{}),h=M(()=>o.count??o.items.length);function D(i){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="move"),u.value=!0}function w(i){const L=i.relatedTarget;i.currentTarget.contains(L)||(u.value=!1)}function x(i){var O;i.preventDefault(),u.value=!1;const L=(O=i.dataTransfer)==null?void 0:O.getData("text/plain");if(L){const S=o.items.find(z=>z.itemId===Number(L));S?m("drop",o.columnId,S):m("drop",o.columnId,{itemId:Number(L)})}}function f(i){m("itemClick",i)}function k(){m("addItem",o.columnId)}function I(){o.collapsible&&(n.value=!n.value,m("toggleCollapse",o.columnId))}return(i,L)=>(t(),r("div",{class:G(["flex flex-col bg-gray-100 rounded-lg min-w-[280px] max-w-[320px] h-full",{"w-12 min-w-[48px]":n.value}])},[e("div",{class:G(["flex-shrink-0 px-3 py-2 border-t-4 rounded-t-lg",[n.value?"cursor-pointer":"",s.color?"":"border-t-gray-400"]]),style:oe(d.value),onClick:L[0]||(L[0]=O=>n.value?I():null)},[n.value?(t(),r("div",or,[e("span",sr,g(s.title),1),e("span",ar,g(h.value),1)])):(t(),r("div",lr,[e("div",nr,[s.collapsible?(t(),r("button",{key:0,class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors",onClick:q(I,["stop"])},[...L[1]||(L[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})],-1)])])):y("",!0),s.color?(t(),r("span",{key:1,class:"w-3 h-3 rounded-full flex-shrink-0",style:oe({backgroundColor:s.color})},null,4)):y("",!0),e("h3",ir,g(s.title),1),e("span",ur,g(h.value),1)]),L[2]||(L[2]=e("button",{class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1))]))],6),n.value?y("",!0):(t(),r("div",{key:0,class:G(["flex-1 overflow-y-auto p-2 space-y-2",{"bg-primary-50 ring-2 ring-primary-300 ring-inset rounded-b-lg":u.value}]),onDragover:D,onDragleave:w,onDrop:x},[(t(!0),r(F,null,X(s.items,O=>(t(),W(rr,{key:O.itemId,item:O,onClick:f},null,8,["item"]))),128)),s.items.length===0?(t(),r("div",dr," 카드를 여기에 놓으세요 ")):y("",!0),e("button",{class:"w-full py-2 text-[13px] text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg transition-colors flex items-center justify-center gap-1",onClick:k},[...L[3]||(L[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),U(" 새 업무 추가 ",-1)])])],34))],2))}}),pr={class:"h-full flex flex-col"},mr={class:"flex-shrink-0 pb-3 flex items-center justify-between"},fr={class:"flex items-center gap-2"},vr={class:"text-[13px] text-gray-500"},yr={key:0,class:"flex-1 flex items-center justify-center"},gr={key:2,class:"flex-1 overflow-x-auto"},xr={class:"flex gap-4 h-full pb-4 min-w-max"},hr=Q({__name:"ItemKanban",props:{boardId:{},filter:{default:"all"}},emits:["itemClick"],setup(s,{emit:P}){const o=s,m=P,u=se(),n=me(),{openItemDetail:d,openItemCreate:h}=he(),D=ae(),w=N(!1),x=N("status");N(null);const f=[{value:"status",label:"상태"},{value:"priority",label:"우선순위"},{value:"assignee",label:"담당자"},{value:"group",label:"그룹"}],k=[{id:"NOT_STARTED",title:"시작전",color:"#6B7280"},{id:"IN_PROGRESS",title:"진행중",color:"#3B82F6"},{id:"PENDING",title:"대기",color:"#F59E0B"},{id:"COMPLETED",title:"완료",color:"#10B981"},{id:"DELETED",title:"삭제",color:"#EF4444"}],I=[{id:"URGENT",title:"긴급",color:"#EF4444"},{id:"HIGH",title:"높음",color:"#F97316"},{id:"NORMAL",title:"보통",color:"#3B82F6"},{id:"LOW",title:"낮음",color:"#6B7280"}],i=M(()=>{const b=u.items.filter(C=>C.status!=="DELETED"&&C.status!=="COMPLETED");switch(o.filter){case"not_started":return b.filter(C=>C.status==="NOT_STARTED");case"in_progress":return b.filter(C=>C.status==="IN_PROGRESS");case"overdue":return b.filter(C=>ee(C));case"pending":return b.filter(C=>C.status==="PENDING");default:return b}}),L=M(()=>{const b=new Map;return i.value.forEach(C=>{C.assigneeId&&C.assigneeName&&b.set(C.assigneeId,{id:C.assigneeId,name:C.assigneeName})}),Array.from(b.values())}),O=M(()=>{const b=new Map;return i.value.forEach(C=>{C.groupId&&C.groupName&&b.set(C.groupId,{id:C.groupId,name:C.groupName,color:C.groupColor})}),Array.from(b.values())}),S=M(()=>{switch(x.value){case"status":return k.map(T=>({id:T.id,title:T.title,color:T.color,items:i.value.filter(l=>l.status===T.id)}));case"priority":return I.map(T=>({id:T.id,title:T.title,color:T.color,items:i.value.filter(l=>l.priority===T.id)}));case"assignee":return[{id:"unassigned",title:"미지정",color:"#9CA3AF",items:i.value.filter(T=>!T.assigneeId)},...L.value.map(T=>({id:T.id,title:T.name,color:"#6366F1",items:i.value.filter(l=>l.assigneeId===T.id)}))];case"group":return[{id:"no-group",title:"미분류",color:"#9CA3AF",items:i.value.filter(T=>!T.groupId)},...O.value.map(T=>({id:T.id,title:T.name,color:T.color||"#6366F1",items:i.value.filter(l=>l.groupId===T.id)}))];default:return[]}}),z=M(()=>u.loading||w.value);async function p(){w.value=!0;try{await Promise.all([u.fetchItems(o.boardId),n.fetchProperties(o.boardId)])}catch{D.error("데이터를 불러오는데 실패했습니다.")}finally{w.value=!1}}function c(b){d(b.itemId,o.boardId),m("itemClick",b)}async function a(b,C){if(!C.itemId)return;let T={};switch(x.value){case"status":if(C.status===b)return;T={status:b};break;case"priority":if(C.priority===b)return;T={priority:b};break;case"assignee":const A=b==="unassigned"?void 0:Number(b);if(C.assigneeId===A)return;T={assigneeId:A};break;case"group":const j=b==="no-group"?void 0:Number(b);if(C.groupId===j)return;T={groupId:j};break}if(await u.updateItem(o.boardId,C.itemId,T)){const A={status:"상태",priority:"우선순위",assignee:"담당자",group:"그룹"};D.success(`${A[x.value]}가 변경되었습니다.`)}else D.error("변경에 실패했습니다.")}function $(b){const C={};switch(x.value){case"status":C.status=b;break;case"priority":C.priority=b;break;case"assignee":b!=="unassigned"&&(C.assigneeId=Number(b));break;case"group":b!=="no-group"&&(C.groupId=Number(b));break}h(o.boardId,C.groupId)}function _(b){b&&typeof b=="string"&&(x.value=b)}return xe(()=>o.boardId,()=>{p()},{immediate:!0}),(b,C)=>(t(),r("div",pr,[e("div",mr,[e("div",fr,[C[0]||(C[0]=e("span",{class:"text-[13px] text-gray-500"},"그룹 기준:",-1)),K(Y(ve),{"model-value":x.value,options:f,size:"sm",class:"w-32","onUpdate:modelValue":_},null,8,["model-value"])]),e("div",vr," 총 "+g(i.value.length)+"개 업무 ",1)]),z.value?(t(),r("div",yr,[K(Y(ce),{size:"lg"})])):i.value.length===0?(t(),W(Y(ke),{key:1,title:"업무가 없습니다",description:"새 업무를 추가해보세요.",icon:"clipboard",class:"flex-1"})):(t(),r("div",gr,[e("div",xr,[(t(!0),r(F,null,X(S.value,T=>(t(),W(cr,{key:T.id,"column-id":T.id,title:T.title,items:T.items,color:T.color,collapsible:"",onItemClick:c,onDrop:a,onAddItem:$},null,8,["column-id","title","items","color"]))),128))])]))]))}}),kr={key:1,class:"flex-shrink-0 w-5 h-5 mr-3 rounded bg-gray-200 flex items-center justify-center"},br={class:"flex-1 min-w-0"},wr={class:"flex items-center gap-2"},Cr={key:0,class:"flex-shrink-0 inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-medium text-red-700 bg-red-100 rounded"},Ir={class:"flex items-center gap-3 mt-0.5"},$r={key:0,class:"text-[12px] text-gray-500 truncate max-w-[100px]"},Mr={key:1,class:"text-[12px] text-gray-400"},Tr={key:2,class:"text-[12px] text-gray-400 flex items-center gap-0.5"},_r={class:"flex-shrink-0 flex items-center gap-1 ml-2"},Ce=Q({__name:"ItemListRow",props:{item:{},selected:{type:Boolean,default:!1}},emits:["click","complete","delete"],setup(s,{emit:P}){const o=s,m=P,u={NOT_STARTED:{label:"시작전",color:"text-gray-600",bg:"bg-gray-100"},IN_PROGRESS:{label:"진행중",color:"text-blue-600",bg:"bg-blue-100"},PENDING:{label:"대기",color:"text-yellow-700",bg:"bg-yellow-100"},COMPLETED:{label:"완료",color:"text-green-600",bg:"bg-green-100"},DELETED:{label:"삭제",color:"text-red-600",bg:"bg-red-100"}},n=M(()=>ee(o.item)),d=M(()=>fe(o.item)),h={URGENT:{color:"border-l-red-500"},HIGH:{color:"border-l-orange-500"},NORMAL:{color:"border-l-blue-500"},LOW:{color:"border-l-gray-400"}},D=M(()=>o.item.status==="COMPLETED"||o.item.status==="DELETED"),w=M(()=>["flex items-center px-3 py-2.5 bg-white border-b border-gray-100","hover:bg-gray-50 active:bg-gray-100 transition-colors cursor-pointer","border-l-4",h[o.item.priority].color,o.selected?"bg-primary-50 border-primary-500":"",D.value?"opacity-60":""]);function x(I){if(!I)return"";const i=new Date(I),L=new Date,O=i.getTime()-L.getTime(),S=Math.ceil(O/(1e3*60*60*24));return S===0?"오늘":S===1?"내일":S===-1?"어제":S>0&&S<=7?`${S}일 후`:S<0&&S>=-7?`${Math.abs(S)}일 전`:i.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})}function f(){m("click",o.item)}function k(I){I.stopPropagation(),m("complete",o.item.itemId)}return(I,i)=>(t(),r("div",{class:G(w.value),onClick:f},[D.value?(t(),r("div",kr,[...i[1]||(i[1]=[e("svg",{class:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])])):(t(),r("button",{key:0,class:"flex-shrink-0 w-5 h-5 mr-3 rounded border-2 border-gray-300 hover:border-green-500 hover:bg-green-50 transition-colors flex items-center justify-center",onClick:k},[...i[0]||(i[0]=[e("svg",{class:"w-3 h-3 text-transparent hover:text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])])),e("div",br,[e("div",wr,[e("h4",{class:G(["text-[14px] text-gray-900 truncate",{"line-through":D.value}])},g(s.item.title),3),n.value?(t(),r("span",Cr,[i[2]||(i[2]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),U(" "+g(d.value)+"일 지연 ",1)])):y("",!0)]),e("div",Ir,[e("span",{class:G(["text-[11px] px-1.5 py-0.5 rounded",u[s.item.status].bg,u[s.item.status].color])},g(u[s.item.status].label),3),s.item.assigneeName?(t(),r("span",$r,g(s.item.assigneeName),1)):y("",!0),s.item.dueDate?(t(),r("span",Mr,g(x(s.item.dueDate)),1)):y("",!0),s.item.commentCount>0?(t(),r("span",Tr,[i[3]||(i[3]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),U(" "+g(s.item.commentCount),1)])):y("",!0)])]),e("div",_r,[s.item.groupName?(t(),r("span",{key:0,class:"hidden sm:inline-block text-[11px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 max-w-[80px] truncate",style:oe(s.item.groupColor?{backgroundColor:`${s.item.groupColor}20`,color:s.item.groupColor}:{})},g(s.item.groupName),5)):y("",!0),i[4]||(i[4]=e("svg",{class:"w-5 h-5 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],2))}}),Er={class:"h-full flex flex-col bg-white rounded-lg border border-gray-200 overflow-hidden"},Dr={key:0,class:"flex-1 flex items-center justify-center"},Br={class:"flex-1 overflow-y-auto"},Nr={key:0},Lr={key:1,class:"px-4 py-8 text-center text-gray-500 text-[13px]"},Rr={key:2,class:"border-t border-gray-200"},Sr={class:"flex items-center gap-2"},jr={class:"text-gray-400"},Pr={key:0,class:"overflow-hidden bg-gray-50"},Or={class:"flex-shrink-0 px-4 py-2 border-t border-gray-200 bg-gray-50"},Vr={class:"flex items-center justify-between text-[12px] text-gray-500"},Ar=Q({__name:"ItemList",props:{boardId:{},filter:{default:"all"}},emits:["itemClick"],setup(s,{emit:P}){const o=s,m=P,u=se(),{openItemDetail:n}=he(),d=ae(),h=$e(),D=N(!1),w=N(null),x=N(!1),f=M(()=>{const p=u.activeItems;switch(o.filter){case"not_started":return p.filter(c=>c.status==="NOT_STARTED");case"in_progress":return p.filter(c=>c.status==="IN_PROGRESS");case"overdue":return p.filter(c=>ee(c));case"pending":return p.filter(c=>c.status==="PENDING");default:return p}}),k=M(()=>u.completedItems),I=M(()=>u.loading||D.value);async function i(){D.value=!0;try{await u.fetchItems(o.boardId)}catch{d.error("데이터를 불러오는데 실패했습니다.")}finally{D.value=!1}}function L(p){w.value=p.itemId,n(p.itemId,o.boardId),m("itemClick",p)}async function O(p){await u.completeItem(o.boardId,p)?d.success("완료 처리되었습니다."):d.error("완료 처리에 실패했습니다.")}async function S(p){await h.show({title:"업무 삭제",message:"이 업무를 삭제하시겠습니까?",confirmText:"삭제",confirmType:"danger"})&&(await u.deleteItem(o.boardId,p)?d.success("삭제되었습니다."):d.error("삭제에 실패했습니다."))}function z(){x.value=!x.value}return xe(()=>o.boardId,()=>{i()},{immediate:!0}),(p,c)=>(t(),r("div",Er,[I.value?(t(),r("div",Dr,[K(Y(ce),{size:"lg"})])):f.value.length===0&&k.value.length===0?(t(),W(Y(ke),{key:1,title:"업무가 없습니다",description:"새 업무를 추가해보세요.",icon:"clipboard",class:"flex-1"})):(t(),r(F,{key:2},[e("div",Br,[f.value.length>0?(t(),r("div",Nr,[(t(!0),r(F,null,X(f.value,a=>(t(),W(Ce,{key:a.itemId,item:a,selected:w.value===a.itemId,onClick:L,onComplete:O,onDelete:S},null,8,["item","selected"]))),128))])):(t(),r("div",Lr," 진행 중인 업무가 없습니다. ")),k.value.length>0?(t(),r("div",Rr,[e("button",{class:"w-full px-4 py-3 flex items-center justify-between text-[13px] text-gray-600 hover:bg-gray-50 transition-colors",onClick:z},[e("span",Sr,[(t(),r("svg",{class:G(["w-4 h-4 transition-transform",{"rotate-90":x.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...c[0]||(c[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),c[1]||(c[1]=U(" 완료됨 ",-1))]),e("span",jr,g(k.value.length),1)]),K(le,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[2000px]","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 max-h-[2000px]","leave-to-class":"opacity-0 max-h-0"},{default:J(()=>[x.value?(t(),r("div",Pr,[(t(!0),r(F,null,X(k.value,a=>(t(),W(Ce,{key:a.itemId,item:a,selected:w.value===a.itemId,onClick:L,onComplete:O,onDelete:S},null,8,["item","selected"]))),128))])):y("",!0)]),_:1})])):y("",!0)]),e("div",Or,[e("div",Vr,[e("span",null,g(f.value.length)+"개 진행 중",1),e("span",null,g(k.value.length)+"개 완료",1)])])],64))]))}}),zr={class:"new-item-input"},Ur={class:"flex gap-2"},Hr={class:"flex-1"},Gr={key:0,class:"mt-2 px-3 py-2 bg-primary-50 border border-primary-200 rounded-lg flex items-center justify-between"},Fr={class:"flex items-center gap-2"},Kr={key:0,class:"text-[11px] text-primary-500"},Wr=Q({__name:"NewItemInput",props:{boardId:{},disabled:{type:Boolean,default:!1}},emits:["created"],setup(s,{expose:P,emit:o}){const m=s,u=o,n=se(),d=ae(),h=N(""),D=N(!1),w=N(!1),x=N([]),f=N(null),k=N(null),I=M(()=>h.value.trim().length>0&&!D.value&&!m.disabled&&m.boardId);async function i(a){if(a.length<2){x.value=[];return}w.value=!0;try{const $=await be.searchTemplates({keyword:a,limit:10});$.success&&$.data?x.value=$.data.map(_=>({value:_.templateId,label:_.content,description:`사용 ${_.useCount}회`,data:_})):x.value=[]}catch{x.value=[]}finally{w.value=!1}}function L(a){h.value=a.label,f.value=a.data}async function O(a){h.value=a,f.value=null}async function S(){if(I.value){D.value=!0;try{const a={title:h.value.trim(),status:"NOT_STARTED",priority:"NORMAL"},$=await n.createItem(m.boardId,a);if($){if(f.value)try{await be.useTemplate(f.value.templateId)}catch{}d.success("업무가 등록되었습니다."),u("created",$.itemId),h.value="",f.value=null,x.value=[]}else d.error("업무 등록에 실패했습니다.")}catch{d.error("업무 등록에 실패했습니다.")}finally{D.value=!1}}}function z(){I.value&&S()}function p(){var a;(a=k.value)==null||a.focus()}function c(){var a;h.value="",f.value=null,x.value=[],(a=k.value)==null||a.clear()}return P({focus:p,clear:c}),(a,$)=>(t(),r("div",zr,[e("div",Ur,[e("div",Hr,[K(vt,{ref_key:"autocompleteRef",ref:k,modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=_=>h.value=_),options:x.value,loading:w.value,disabled:s.disabled||D.value,placeholder:"새 업무를 입력하세요...","min-chars":2,"debounce-ms":300,"max-results":10,"empty-message":"일치하는 템플릿이 없습니다",onSearch:i,onSelect:L,onCreate:O,onEnter:z},{prefix:J(()=>[...$[2]||($[2]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),_:1},8,["modelValue","options","loading","disabled"])]),K(Y(Be),{loading:D.value,disabled:!I.value,onClick:S},{default:J(()=>[...$[3]||($[3]=[U(" 등록 ",-1)])]),_:1},8,["loading","disabled"])]),K(le,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:J(()=>[f.value?(t(),r("div",Gr,[e("div",Fr,[$[4]||($[4]=e("svg",{class:"w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),$[5]||($[5]=e("span",{class:"text-[13px] text-primary-700"}," 템플릿 선택됨 ",-1)),f.value.useCount>0?(t(),r("span",Kr," (사용 "+g(f.value.useCount)+"회) ",1)):y("",!0)]),e("button",{class:"p-1 text-primary-400 hover:text-primary-600 rounded transition-colors",onClick:$[1]||($[1]=_=>f.value=null)},[...$[6]||($[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):y("",!0)]),_:1})]))}}),qr={key:0,class:"completed-items-collapse"},Yr={class:"flex items-center gap-2"},Xr={class:"px-2 py-0.5 text-[11px] font-medium bg-gray-200 text-gray-600 rounded-full"},Qr={class:"flex items-center gap-1.5 ml-2"},Jr={key:0,class:"text-[11px] text-green-600"},Zr={key:1,class:"text-gray-300"},eo={key:2,class:"text-[11px] text-red-500"},to={class:"text-[11px] text-gray-400"},ro={key:0,class:"mt-2 border border-gray-200 rounded-lg overflow-hidden"},oo={class:"max-h-60 overflow-y-auto"},so={class:"col-span-7 flex items-center gap-2 min-w-0"},ao={class:"text-[13px] text-gray-700 truncate"},lo={class:"col-span-2 flex items-center justify-center"},no={class:"col-span-3 flex items-center justify-end"},io={class:"text-[12px] text-gray-500"},uo={key:0,class:"px-4 py-6 text-center text-[13px] text-gray-400"},co=Q({__name:"CompletedItemsCollapse",setup(s){const P=se(),o=N(!1),m=M(()=>P.todayCompletedItems),u=M(()=>m.value.length),n=M(()=>m.value.filter(f=>f.status==="COMPLETED").length),d=M(()=>m.value.filter(f=>f.status==="DELETED").length);function h(){o.value=!o.value}function D(f){const k=f.status==="COMPLETED"?f.completedAt:f.deletedAt;return k?new Date(k).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):"-"}function w(f){return f==="COMPLETED"?"success":"danger"}function x(f){return f==="COMPLETED"?"완료":"삭제"}return(f,k)=>u.value>0?(t(),r("div",qr,[e("button",{class:"w-full flex items-center justify-between px-4 py-2.5 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors",onClick:h},[e("div",Yr,[(t(),r("svg",{class:G(["w-4 h-4 text-gray-500 transition-transform duration-200",{"rotate-90":o.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...k[0]||(k[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),k[1]||(k[1]=e("span",{class:"text-[13px] font-medium text-gray-600"}," 오늘 처리된 업무 ",-1)),e("span",Xr,g(u.value)+"건 ",1),e("div",Qr,[n.value>0?(t(),r("span",Jr," 완료 "+g(n.value),1)):y("",!0),n.value>0&&d.value>0?(t(),r("span",Zr,"|")):y("",!0),d.value>0?(t(),r("span",eo," 삭제 "+g(d.value),1)):y("",!0)])]),e("span",to,g(o.value?"접기":"펼치기"),1)]),K(le,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:J(()=>[o.value?(t(),r("div",ro,[k[2]||(k[2]=e("div",{class:"grid grid-cols-12 gap-2 px-4 py-2 bg-gray-50 border-b border-gray-200 text-[11px] font-medium text-gray-500 uppercase tracking-wider"},[e("div",{class:"col-span-7"},"작업 내용"),e("div",{class:"col-span-2 text-center"},"결과"),e("div",{class:"col-span-3 text-right"},"처리 시간")],-1)),e("div",oo,[(t(!0),r(F,null,X(m.value,I=>(t(),r("div",{key:I.itemId,class:"grid grid-cols-12 gap-2 px-4 py-2.5 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors"},[e("div",so,[e("span",ao,g(I.title),1)]),e("div",lo,[K(Y(Me),{variant:w(I.status),size:"sm"},{default:J(()=>[U(g(x(I.status)),1)]),_:2},1032,["variant"])]),e("div",no,[e("span",io,g(D(I)),1)])]))),128))]),m.value.length===0?(t(),r("div",uo," 오늘 처리된 업무가 없습니다. ")):y("",!0)])):y("",!0)]),_:1})])):y("",!0)}}),po=Te(co,[["__scopeId","data-v-eb0c6db5"]]),mo={class:"h-full flex flex-col"},fo={class:"flex-shrink-0 pb-4"},vo={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},yo={class:"flex items-center gap-3"},go={class:"inline-flex rounded-lg border border-gray-200 bg-gray-50 p-1"},xo={key:0,class:"flex-shrink-0 mb-4"},ho={class:"flex items-center gap-1 p-1 bg-gray-100 rounded-lg"},ko=["onClick"],bo={key:0,class:"w-3.5 h-3.5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wo={key:1,class:"flex-shrink-0 mb-4"},Co={class:"flex-1 min-h-0"},Io={key:0,class:"h-full flex items-center justify-center"},$o={key:1,class:"h-full flex items-center justify-center"},Mo={key:2,class:"flex-shrink-0"},Fo=Q({__name:"TasksView",setup(s){const P=Ie(),o=se(),m=ae(),u=N(!1),n=N("all"),d=M(()=>P.currentBoardId),h=M(()=>P.activeBoards.map(p=>({value:p.boardId,label:p.boardName}))),D=M({get:()=>P.viewType,set:p=>P.setViewType(p)}),w=M(()=>o.activeItems),x=M(()=>{const p=w.value;return{all:p.length,not_started:p.filter(c=>c.status==="NOT_STARTED").length,in_progress:p.filter(c=>c.status==="IN_PROGRESS").length,overdue:p.filter(c=>ee(c)).length,pending:p.filter(c=>c.status==="PENDING").length}}),f=M(()=>[{value:"all",label:"전체",count:x.value.all},{value:"not_started",label:"대기",count:x.value.not_started},{value:"in_progress",label:"진행중",count:x.value.in_progress},{value:"overdue",label:"지연",count:x.value.overdue,warning:!0},{value:"pending",label:"보류",count:x.value.pending}]);M(()=>{const p=w.value;switch(n.value){case"not_started":return p.filter(c=>c.status==="NOT_STARTED");case"in_progress":return p.filter(c=>c.status==="IN_PROGRESS");case"overdue":return p.filter(c=>ee(c));case"pending":return p.filter(c=>c.status==="PENDING");default:return p}});async function k(){u.value=!0;try{await P.fetchBoards(),P.boards.length>0&&!d.value&&await I(P.boards[0].boardId)}catch{m.error("보드 목록을 불러오는데 실패했습니다.")}finally{u.value=!1}}async function I(p){const c=P.getBoardById(p);c&&(P.setCurrentBoard(c),await P.fetchBoard(p))}function i(p){}function L(p){}function O(p){p&&typeof p=="number"&&I(p)}function S(p){p&&typeof p=="string"&&P.setViewType(p)}function z(p){n.value=p}return de(()=>{P.loadViewType(),k()}),(p,c)=>(t(),r("div",mo,[e("div",fo,[e("div",vo,[e("div",yo,[K(Y(ve),{"model-value":d.value,options:h.value,placeholder:"보드 선택",class:"w-48","onUpdate:modelValue":O},null,8,["model-value","options"]),e("div",go,[e("button",{type:"button",class:G(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-150 whitespace-nowrap",D.value==="table"?"bg-white text-primary-700 shadow-sm":"text-gray-600 hover:text-gray-900"]),onClick:c[0]||(c[0]=a=>S("table"))},[...c[3]||(c[3]=[e("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M3 14h18M3 6h18M3 18h18M10 6v12M17 6v12"})],-1),e("span",null,"테이블",-1)])],2),e("button",{type:"button",class:G(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-150 whitespace-nowrap",D.value==="kanban"?"bg-white text-primary-700 shadow-sm":"text-gray-600 hover:text-gray-900"]),onClick:c[1]||(c[1]=a=>S("kanban"))},[...c[4]||(c[4]=[e("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1),e("span",null,"칸반",-1)])],2),e("button",{type:"button",class:G(["flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-150 whitespace-nowrap",D.value==="list"?"bg-white text-primary-700 shadow-sm":"text-gray-600 hover:text-gray-900"]),onClick:c[2]||(c[2]=a=>S("list"))},[...c[5]||(c[5]=[e("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1),e("span",null,"리스트",-1)])],2)])])])]),d.value&&!u.value?(t(),r("div",xo,[e("div",ho,[(t(!0),r(F,null,X(f.value,a=>(t(),r("button",{key:a.value,class:G(["flex items-center gap-1.5 px-3 py-1.5 text-[13px] font-medium rounded-md transition-colors",[n.value===a.value?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"]]),onClick:$=>z(a.value)},[e("span",null,g(a.label),1),e("span",{class:G(["px-1.5 py-0.5 text-[11px] rounded-full",[n.value===a.value?a.warning?"bg-red-100 text-red-700":"bg-primary-100 text-primary-700":a.warning&&a.count>0?"bg-red-100 text-red-600":"bg-gray-200 text-gray-600"]])},g(a.count),3),a.warning&&a.count>0&&n.value!==a.value?(t(),r("svg",bo,[...c[6]||(c[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])])):y("",!0)],10,ko))),128))])])):y("",!0),d.value?(t(),r("div",wo,[K(Wr,{"board-id":d.value,onCreated:L},null,8,["board-id"])])):y("",!0),e("div",Co,[u.value?(t(),r("div",Io,[K(Y(ce),{size:"lg"})])):d.value?D.value==="table"?(t(),W(Ht,{key:2,"board-id":d.value,filter:n.value,onItemClick:i},null,8,["board-id","filter"])):D.value==="kanban"?(t(),W(hr,{key:3,"board-id":d.value,filter:n.value,onItemClick:i},null,8,["board-id","filter"])):D.value==="list"?(t(),W(Ar,{key:4,"board-id":d.value,filter:n.value,onItemClick:i},null,8,["board-id","filter"])):y("",!0):(t(),r("div",$o,[...c[7]||(c[7]=[e("div",{class:"text-center"},[e("svg",{class:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})]),e("p",{class:"text-gray-500"},"보드를 선택해주세요.")],-1)])]))]),d.value&&!u.value&&n.value==="all"?(t(),r("div",Mo,[K(po)])):y("",!0)]))}});export{Fo as default};
