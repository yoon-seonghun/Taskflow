import{d as A,r as v,c as x,o as I,A as N,f as t,i,g as s,k as S,p as j,t as f,q as w,I as z,T as K,m as U,M as F,l as $,L as H,F as P,s as Q,n as a}from"./index-D8qsMxsh.js";const G={key:0,class:"block text-[13px] font-medium text-gray-700 mb-1"},J={key:0,class:"text-red-500 ml-0.5"},W=["disabled"],X={key:0,class:"flex items-center gap-2 truncate"},Y={key:1,class:"text-gray-400 truncate"},Z={class:"flex items-center gap-1 flex-shrink-0"},_={key:0,class:"p-2 border-b border-gray-100"},ee={class:"overflow-y-auto max-h-48"},te=["onClick","onMouseenter"],ae={class:"truncate flex-1"},re={key:1,class:"w-4 h-4 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={key:0,class:"px-3 py-4 text-center text-gray-500 text-[13px]"},oe={key:1,class:"mt-1 text-xs text-red-500"},ne=A({__name:"Select",props:{modelValue:{default:null},options:{},size:{default:"md"},placeholder:{default:"선택해주세요"},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{},label:{},required:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},createLabel:{default:"새 옵션 추가"}},emits:["update:modelValue","create","change"],setup(l,{emit:E}){const n=l,y=E,c=v(!1),u=v(""),d=v(-1),b=v(null),O=v(null),C=v(null),p=x(()=>n.options.find(e=>e.value===n.modelValue)),g=x(()=>{if(!n.searchable||!u.value)return n.options;const e=u.value.toLowerCase();return n.options.filter(r=>r.label.toLowerCase().includes(e))}),k=x(()=>{if(!n.allowCreate||!u.value.trim())return!1;const e=u.value.toLowerCase().trim();return!n.options.some(r=>r.label.toLowerCase()===e)}),R=x(()=>{const e=["w-full rounded border transition-all duration-150","flex items-center justify-between gap-2","focus:outline-none focus:ring-2 focus:border-transparent","text-left"],r={sm:"px-2 py-1 text-xs h-7",md:"px-3 py-1.5 text-[13px] h-8",lg:"px-3 py-2 text-sm h-9"},o=n.error?"border-red-500 focus:ring-red-500":c.value?"border-primary-500 ring-2 ring-primary-500":"border-gray-300 focus:ring-primary-500",m=n.disabled?"bg-gray-100 cursor-not-allowed text-gray-500":"bg-white cursor-pointer hover:border-gray-400";return[...e,r[n.size],o,m].join(" ")});function M(){n.disabled||(c.value=!c.value,c.value&&(u.value="",d.value=-1,F(()=>{var e;(e=C.value)==null||e.focus()})))}function h(){c.value=!1,u.value=""}function B(e){e.disabled||(y("update:modelValue",e.value),y("change",e.value),h())}function q(e){e.stopPropagation(),y("update:modelValue",null),y("change",null)}function L(){const e=u.value.trim();e&&(y("create",e),u.value="")}function V(e){if(!c.value){(e.key==="Enter"||e.key===" "||e.key==="ArrowDown")&&(e.preventDefault(),M());return}switch(e.key){case"ArrowDown":e.preventDefault(),d.value=Math.min(d.value+1,g.value.length-1);break;case"ArrowUp":e.preventDefault(),d.value=Math.max(d.value-1,0);break;case"Enter":e.preventDefault(),d.value>=0&&g.value[d.value]?B(g.value[d.value]):k.value&&L();break;case"Escape":h();break}}function D(e){b.value&&!b.value.contains(e.target)&&h()}return I(()=>{document.addEventListener("click",D)}),N(()=>{document.removeEventListener("click",D)}),(e,r)=>(a(),t("div",{ref_key:"containerRef",ref:b,class:"relative w-full"},[l.label?(a(),t("label",G,[j(f(l.label)+" ",1),l.required?(a(),t("span",J,"*")):i("",!0)])):i("",!0),s("button",{type:"button",class:w(R.value),disabled:l.disabled,onClick:M,onKeydown:V},[p.value?(a(),t("span",X,[p.value.color?(a(),t("span",{key:0,class:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:z({backgroundColor:p.value.color})},null,4)):i("",!0),j(" "+f(p.value.label),1)])):(a(),t("span",Y,f(l.placeholder),1)),s("div",Z,[l.clearable&&p.value&&!l.disabled?(a(),t("span",{key:0,class:"text-gray-400 hover:text-gray-600 p-0.5",onClick:q},[...r[1]||(r[1]=[s("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):i("",!0),(a(),t("svg",{class:w(["w-4 h-4 text-gray-400 transition-transform",{"rotate-180":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[2]||(r[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],42,W),S(K,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:U(()=>[c.value?(a(),t("div",{key:0,ref_key:"dropdownRef",ref:O,class:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden"},[l.searchable?(a(),t("div",_,[$(s("input",{ref_key:"searchInputRef",ref:C,"onUpdate:modelValue":r[0]||(r[0]=o=>u.value=o),type:"text",class:"w-full px-2 py-1.5 text-[13px] border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"검색...",onKeydown:V},null,544),[[H,u.value]])])):i("",!0),s("div",ee,[(a(!0),t(P,null,Q(g.value,(o,m)=>(a(),t("div",{key:o.value,class:w(["px-3 py-2 text-[13px] cursor-pointer flex items-center gap-2",[o.disabled?"text-gray-400 cursor-not-allowed":"hover:bg-gray-50",d.value===m?"bg-gray-100":"",o.value===l.modelValue?"bg-primary-50 text-primary-700":"text-gray-700"]]),onClick:T=>B(o),onMouseenter:T=>d.value=m},[o.color?(a(),t("span",{key:0,class:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:z({backgroundColor:o.color})},null,4)):i("",!0),s("span",ae,f(o.label),1),o.value===l.modelValue?(a(),t("svg",re,[...r[3]||(r[3]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):i("",!0)],42,te))),128)),g.value.length===0&&!k.value?(a(),t("div",le," 검색 결과가 없습니다 ")):i("",!0),k.value?(a(),t("div",{key:1,class:"px-3 py-2 text-[13px] text-primary-600 cursor-pointer hover:bg-primary-50 flex items-center gap-2 border-t border-gray-100",onClick:L},[r[4]||(r[4]=s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),s("span",null,'"'+f(u.value)+'" '+f(l.createLabel),1)])):i("",!0)])],512)):i("",!0)]),_:1}),l.error&&l.errorMessage?(a(),t("p",oe,f(l.errorMessage),1)):i("",!0)],512))}});export{ne as _};
