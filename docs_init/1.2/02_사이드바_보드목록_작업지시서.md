# 사이드바 보드 목록 표시 기능 작업 지시서

## 문서 정보

| 항목 | 내용 |
|------|------|
| 문서 버전 | 1.0 |
| 작성일 | 2024-12-24 |
| 관련 설계서 | 01_사이드바_보드목록_설계서.md |

---

## 1. 작업 개요

| 항목 | 내용 |
|------|------|
| 작업명 | 사이드바 보드 목록 표시 기능 구현 |
| 작업 목적 | 좌측 메뉴에서 보드 빠른 접근 및 현황 파악 |
| 영향 범위 | 프론트엔드 (Sidebar.vue) |

---

## 2. 작업 항목

### Phase 1: 기본 구조 구현

| 순번 | 작업 내용 | 파일 | 예상 시간 |
|------|----------|------|-----------|
| 1-1 | 보드 스토어 import 추가 | Sidebar.vue | - |
| 1-2 | 보드 목록 로드 (onMounted) | Sidebar.vue | - |
| 1-3 | 보드 분류 computed 속성 추가 | Sidebar.vue | - |

### Phase 2: UI 구현

| 순번 | 작업 내용 | 파일 | 예상 시간 |
|------|----------|------|-----------|
| 2-1 | 보드 관리 메뉴 하단 divider 추가 | Sidebar.vue | - |
| 2-2 | "내 보드" 섹션 UI 구현 | Sidebar.vue | - |
| 2-3 | "공유해준 보드" 섹션 UI 구현 | Sidebar.vue | - |
| 2-4 | "공유받은 보드" 섹션 UI 구현 | Sidebar.vue | - |
| 2-5 | 접기/펼치기 토글 기능 구현 | Sidebar.vue | - |

### Phase 3: 인터랙션 구현

| 순번 | 작업 내용 | 파일 | 예상 시간 |
|------|----------|------|-----------|
| 3-1 | 보드 선택 함수 구현 | Sidebar.vue | - |
| 3-2 | 현재 보드 하이라이트 스타일 적용 | Sidebar.vue | - |
| 3-3 | 모바일 사이드바 닫기 연동 | Sidebar.vue | - |

### Phase 4: 빌드 및 테스트

| 순번 | 작업 내용 | 파일 | 예상 시간 |
|------|----------|------|-----------|
| 4-1 | 빌드 확인 | - | - |
| 4-2 | Docker 컨테이너 재빌드 | - | - |
| 4-3 | 기능 테스트 | - | - |

---

## 3. 상세 작업 지시

### 3.1 Phase 1: 기본 구조 구현

#### 작업 1-1: 보드 스토어 import 추가

**파일**: `frontend/src/components/layout/Sidebar.vue`

**작업 내용**:
```typescript
// 기존 import에 추가
import { ref, computed, onMounted } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { useBoardStore } from '@/stores/board'
import type { Board } from '@/types/board'
```

#### 작업 1-2: 보드 목록 로드

**작업 내용**:
```typescript
const boardStore = useBoardStore()
const router = useRouter()

onMounted(() => {
  boardStore.fetchBoards()
})
```

#### 작업 1-3: 보드 분류 computed 속성

**작업 내용**:
```typescript
// 내 보드 (공유하지 않은)
const myPrivateBoards = computed(() =>
  boardStore.boards.filter(b => b.isOwner === true && (b.shareCount || 0) === 0)
)

// 공유해준 보드 (내 보드인데 다른 사람에게 공유)
const mySharedBoards = computed(() =>
  boardStore.boards.filter(b => b.isOwner === true && (b.shareCount || 0) > 0)
)

// 공유받은 보드 (다른 사람이 나에게 공유)
const receivedBoards = computed(() =>
  boardStore.boards.filter(b => b.isOwner !== true)
)
```

---

### 3.2 Phase 2: UI 구현

#### 작업 2-1: 섹션 상태 변수 추가

**작업 내용**:
```typescript
// 섹션 접기/펼치기 상태
const showMyBoards = ref(true)
const showMySharedBoards = ref(true)
const showReceivedBoards = ref(true)
```

#### 작업 2-2~2-4: 보드 목록 섹션 UI

**위치**: `</nav>` 태그 직전, 메뉴 항목 이후

**템플릿 구조**:
```vue
<!-- 보드 목록 섹션 -->
<div v-if="boardStore.boards.length > 0" class="mt-2">
  <div class="border-t border-gray-100 my-2" />

  <!-- 내 보드 섹션 -->
  <template v-if="myPrivateBoards.length > 0">
    <div
      class="flex items-center gap-1 px-3 py-1.5 cursor-pointer select-none"
      @click="showMyBoards = !showMyBoards"
    >
      <svg class="w-3 h-3 text-gray-400 transition-transform" :class="{ '-rotate-90': !showMyBoards }">
        <!-- 화살표 아이콘 -->
      </svg>
      <span class="text-xs text-gray-500">내 보드 ({{ myPrivateBoards.length }})</span>
    </div>
    <template v-if="showMyBoards">
      <div
        v-for="board in myPrivateBoards"
        :key="board.boardId"
        @click="selectBoard(board)"
        class="flex items-center gap-2 px-3 pl-6 py-1.5 cursor-pointer hover:bg-gray-100 rounded-md mx-1"
        :class="{ 'bg-primary-50 text-primary-700': currentBoardId === board.boardId }"
      >
        <span
          class="w-2 h-2 rounded-full flex-shrink-0"
          :style="{ backgroundColor: board.boardColor || board.color || '#9CA3AF' }"
        />
        <span class="text-sm truncate">{{ board.boardName }}</span>
      </div>
    </template>
  </template>

  <!-- 공유해준 보드 섹션 -->
  <template v-if="mySharedBoards.length > 0">
    <div
      class="flex items-center gap-1 px-3 py-1.5 cursor-pointer select-none"
      @click="showMySharedBoards = !showMySharedBoards"
    >
      <svg class="w-3 h-3 text-gray-400 transition-transform" :class="{ '-rotate-90': !showMySharedBoards }">
        <!-- 화살표 아이콘 -->
      </svg>
      <span class="text-xs text-gray-500">공유해준 보드 ({{ mySharedBoards.length }})</span>
    </div>
    <template v-if="showMySharedBoards">
      <div
        v-for="board in mySharedBoards"
        :key="board.boardId"
        @click="selectBoard(board)"
        class="flex items-center gap-2 px-3 pl-6 py-1.5 cursor-pointer hover:bg-gray-100 rounded-md mx-1"
        :class="{ 'bg-primary-50 text-primary-700': currentBoardId === board.boardId }"
      >
        <span
          class="w-2 h-2 rounded-full flex-shrink-0"
          :style="{ backgroundColor: board.boardColor || board.color || '#9CA3AF' }"
        />
        <span class="text-sm truncate flex-1">{{ board.boardName }}</span>
        <span class="text-xs text-gray-400 flex items-center gap-0.5">
          <svg class="w-3 h-3"><!-- users 아이콘 --></svg>
          {{ board.shareCount }}
        </span>
      </div>
    </template>
  </template>

  <!-- 공유받은 보드 섹션 -->
  <template v-if="receivedBoards.length > 0">
    <div
      class="flex items-center gap-1 px-3 py-1.5 cursor-pointer select-none"
      @click="showReceivedBoards = !showReceivedBoards"
    >
      <svg class="w-3 h-3 text-gray-400 transition-transform" :class="{ '-rotate-90': !showReceivedBoards }">
        <!-- 화살표 아이콘 -->
      </svg>
      <span class="text-xs text-gray-500">공유받은 보드 ({{ receivedBoards.length }})</span>
    </div>
    <template v-if="showReceivedBoards">
      <div
        v-for="board in receivedBoards"
        :key="board.boardId"
        @click="selectBoard(board)"
        class="flex items-center gap-2 px-3 pl-6 py-1.5 cursor-pointer hover:bg-gray-100 rounded-md mx-1"
        :class="{ 'bg-primary-50 text-primary-700': currentBoardId === board.boardId }"
      >
        <span
          class="w-2 h-2 rounded-full flex-shrink-0"
          :style="{ backgroundColor: board.boardColor || board.color || '#9CA3AF' }"
        />
        <span class="text-sm truncate flex-1">{{ board.boardName }}</span>
        <span class="text-xs text-gray-400">@{{ board.ownerName }}</span>
      </div>
    </template>
  </template>
</div>
```

---

### 3.3 Phase 3: 인터랙션 구현

#### 작업 3-1: 보드 선택 함수

**작업 내용**:
```typescript
// 현재 선택된 보드 ID
const currentBoardId = computed(() => boardStore.currentBoard?.boardId)

// 보드 선택 및 페이지 이동
function selectBoard(board: Board) {
  boardStore.setCurrentBoard(board)
  router.push({ name: 'Tasks' })
  emit('close')  // 모바일에서 사이드바 닫기
}
```

---

### 3.4 Phase 4: 빌드 및 테스트

#### 작업 4-1: 빌드 확인
```bash
cd /mnt/d/SNS_Proj/Taskflow/frontend
npm run build
```

#### 작업 4-2: Docker 재빌드
```bash
cd /mnt/d/SNS_Proj/Taskflow
docker compose up -d --build frontend
```

#### 작업 4-3: 테스트 시나리오

| 테스트 항목 | 예상 결과 |
|-------------|-----------|
| 보드 목록 표시 | 3개 섹션으로 분류되어 표시 |
| 섹션 접기/펼치기 | 클릭 시 토글 동작 |
| 보드 색상 표시 | 설정된 색상 도트 표시 |
| 공유해준 보드 | 공유 인원 수 표시 |
| 공유받은 보드 | 소유자명 표시 |
| 보드 클릭 | Tasks 페이지로 이동 + 해당 보드 선택 |
| 현재 보드 하이라이트 | 선택된 보드 배경색 변경 |

---

## 4. 수정 파일 목록

| 파일 | 변경 유형 | 설명 |
|------|----------|------|
| `frontend/src/components/layout/Sidebar.vue` | 수정 | 보드 목록 섹션 추가 |

---

## 5. 체크리스트

### 작업 전
- [ ] 설계서 검토 완료
- [ ] 현재 코드 상태 확인

### 작업 중
- [ ] Phase 1 완료
- [ ] Phase 2 완료
- [ ] Phase 3 완료
- [ ] 빌드 오류 없음

### 작업 후
- [ ] Docker 재빌드 완료
- [ ] 테스트 시나리오 검증 완료
- [ ] 코드 리뷰 (선택)

---

## 6. 주의사항

1. **데이터 로드 타이밍**: 보드 목록이 아직 로드되지 않은 상태에서 UI 렌더링 시 빈 목록 처리 필요

2. **성능 고려**: 보드 목록이 많을 경우 가상 스크롤 고려 (현재는 불필요)

3. **반응형 처리**: 모바일에서 보드 선택 시 사이드바 자동 닫기

4. **보드 색상 호환성**: `boardColor` 또는 `color` 필드 모두 확인

---

## 7. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2024-12-24 | 최초 작성 |
